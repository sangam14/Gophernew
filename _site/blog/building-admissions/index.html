<!DOCTYPE HTML>



<html lang="en">
	<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta name="description" content="">
  <meta name="author" content="Sean Callan">

  <meta property="og:url" content="http://localhost:4000/blog/building-admissions/">
  <meta property="og:site_name" content="ElixirSchool">
  <meta property="og:title" content="">
  <meta property="og:locale" content="">
  <meta property="og:description" content="">
  <meta property="og:image" content="http://localhost:4000/assets/og_image-fad975b316dea5dc361d199bdfaa076006da49a0a3296f799aa7217b4c8b0cbe.jpg">
  
  

  <link rel="canonical" href="http://localhost:4000/blog/building-admissions/">
  <link rel="apple-touch-icon" sizes="180x180" href="http://localhost:4000/assets/favicons/apple-touch-icon-06ad80501b5734bba0428ca0fc14fcbe45811a144914f7be78cdab3c3ea25458.png">
  <link rel="icon" type="image/png" sizes="32x32" href="http://localhost:4000/assets/favicons/favicon-32x32-6e7b9eca57d29d185a5184e844c1372ce9da0a71f373f89b80ff11f120b01678.png">
  <link rel="icon" type="image/png" sizes="16x16" href="http://localhost:4000/assets/favicons/favicon-16x16-789b56195138252cac40cf7f2425b6fcb4e71c3084abc8525781188781b958d3.png">
  <link rel="manifest" href="http://localhost:4000/manifest.json">
  <link rel="shortcut icon" href="http://localhost:4000/assets/favicons/favicon-8e1fdc2a44d6344b9871b3ecf53a803903891f82a602a3f59c65eda40f2b77b0.ico">
  <link rel="alternate" type="application/rss+xml" title="Elixir School" href="https://elixirschool.com/feed.xml" />
  <meta name="msapplication-config" content="http://localhost:4000/assets/favicons/browserconfig-e66282a6754e6899f9a53c6ebfe120749630242b741deb65f364abc297ccbc96.xml">
  <meta name="theme-color" content="#ffffff">

  
  
  <title>Building Elixir School's Admissions portal &middot; Elixir School</title>
  <!-- CSS -->
  <!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
  <link rel="stylesheet" type="text/css" href="/assets/main-07a5a32c1a26652d2bb0e43b4c7ade37f20599a76cae3c1e871d3af53cff80b2.css">
  <!--[if lte IE 9]><link rel="stylesheet" type="text/css" href="/assets/ie9-0c07c3ea146a3dd5dce4effda97b3718824cab9c30149877c0e445edecfdee60.css"><![endif]-->
  <!--[if lte IE 8]><link rel="stylesheet" type="text/css" href="/assets/ie8-f0c85ce6ad95a6d33929cb969a44f41a5e96ecb22de55f55d0f3c83cfc0012fc.css"><![endif]-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
  <script type="text/javascript">
  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.1.0";
  analytics.load("C0p07Sw9j7mZnycKDCgPOAyqJR5hhyoQ");
  analytics.page()
  }}();
  </script>
  <script type="text/javascript">
    if ("serviceWorker" in navigator) {
      if (!navigator.serviceWorker.controller) {
        navigator.serviceWorker.register("http://localhost:4000/serviceworker.js", {
          scope: "http://localhost:4000"
        })
        .then(reg => console.log("Service worker has been registered for scope: ", reg.scope))
        .catch(error => console.log("Service worker registration has failed: ", error));
      }
    }  
  </script>
</head>

	<body class="is-loading">
    <script type="text/javascript">
    var $theme = localStorage.getItem('theme');
    if ($theme === 'dark') document.body.classList.add("dark");
    </script>
		<!-- Wrapper -->
		<div id="wrapper">
			<!-- Main -->
			<div id="main">
				<div class="inner">
					<!-- Header -->
					<header id="header">
					  <a href="/" class="logo"><strong>Elixir School</strong> Blog</a>
					  <ul class="icons">
  
  <li><iframe src="https://ghbtns.com/github-btn.html?user=elixirschool&repo=elixirschool&type=star&count=true" height="20" title="GitHub Stars" width="93" style="vertical-align: sub;"></iframe></li>
  <li><a target="_blank" rel="noopener" title="RSS" href="https://elixirschool.com/feed.xml" class="icon fa-rss-square"><span class="label">RSS</span></a></li>
  <li><a target="_blank" rel="noopener" title="LinkedIn" href="https://www.linkedin.com/shareArticle?mini=true&url=http://localhost:4000/blog/building-admissions/&title=Building Elixir School's Admissions portal&summary=description&source=http://localhost:4000" class="icon fa-linkedin"><span class="label">Linkedin</span></a></li>
  <li><a target="_blank" rel="noopener" title="Twitter" href="https://twitter.com/intent/tweet?url=http://localhost:4000/blog/building-admissions/&via=elixirschool&text=ElixirSchool: Building Elixir School's Admissions portal&hashtags=learnelixir%2Celixirlang&" class="icon fa-twitter"><span class="label">Twitter</span></a></li>
  <li><a target="_blank" rel="noopener" title="Facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/blog/building-admissions/" class="icon fa-facebook"><span class="label">Facebook</span></a></li>
  <li><a target="_blank" rel="noopener" title="Pinterest" href="https://www.pinterest.com/pin/create/link/?url=http://localhost:4000/blog/building-admissions/&media=http://localhost:4000/assets/og_image-fad975b316dea5dc361d199bdfaa076006da49a0a3296f799aa7217b4c8b0cbe.jpg&description=ElixirSchool: Building Elixir School's Admissions portal" class="icon fa-pinterest"><span class="label">Pinterest</span></a></li>
  <li><a target="_blank" rel="noopener" title="VK" href="https://vk.com/share.php?url=http://localhost:4000/blog/building-admissions/&title=ElixirSchool: Building Elixir School's Admissions portal&description=Check out 'Building Elixir School's Admissions portal' on ElixirSchool" class="icon fa-vk"><span class="label">VK</span></a></li>
  <li><a target="_blank" rel="noopener" title="Email" href="mailto:?to=&subject=ElixirSchool: Building Elixir School's Admissions portal&body=Check out 'Building Elixir School's Admissions portal' on ElixirSchool%0D%0A%0D%0Ahttp://localhost:4000/blog/building-admissions/" class="icon fa-envelope"><span class="label">Email</span></a></li>
  <li><a title="Print" href="javascript:window.print()" class="icon fa-print"><span class="label">Print</span></a></li>
</ul>

					</header>
					

<section id="section-page">
  <header class="main">
    <h1 class="post-title">Building Elixir School's Admissions portal</h1>
    <p><a href="/blog/years/2019/">23 Oct 2019</a> · by 

    <a href="https://seancallan.com" target="_blank" rel="nofollow noopener">Sean Callan</a> in <a href="/blog/categories/general/">General</a></p>
  </header>
  <div class="content">
    <p>If you didn’t know, Elixir School has its own Slack where contributors can gather to discuss our organization’s content and projects but most importantly, support one another in our Elixir journey. When we set out to create our own Slack we wanted to address a big concern with many public Slacks: the signal to noise ratio is bad, there’s just too much spam.</p>

<blockquote>
  <p>Have you contributed to an Elixir School project but not joined us on Slack? Head over to https://admissions.elixirschool.com to get your invite today!</p>
</blockquote>

<p>So how can we keep our Slack public but prevent spammers from joining and do so in a way that doesn’t add work to our maintainers? Our solution: required at least once contribution of any side to any one of our projects.</p>

<p>Achieving this required an application that used GitHub to verify a user’s eligibility. This application would come to be known as: Admissions.</p>

<blockquote>
  <p>Want to skip ahead and see the final product? The code can be found at https://github.com/elixirschool/admissions.</p>
</blockquote>

<p>In this post we’re going to explore how Admissions works and how we achieved our goals using Elixir and Phoenix. To start let’s look at the expected flow and work from there:</p>

<p><img src="https://user-images.githubusercontent.com/73386/67163591-ff12a280-f32d-11e9-83f9-f033345f559b.png" alt="image" /></p>

<p>In addition to telling us how the application should function, this diagram breaks the flow up into convenient development tasks. Working from this diagram let’s explore the individual tasks we’ll need in order to fulfill our high level requirements:</p>

<ol>
  <li>Allow a user to sign in using GitHub and capture their access token. We can leverage <a href="https://github.com/ueberauth/ueberauth">Ueberauth</a> and its <a href="https://github.com/ueberauth/ueberauth_github">GitHub strategy</a> to do the heavy lifting for us.</li>
  <li>With the user’s access token use the GitHub API to see if the user has contributed to an organization’s project. To avoid having to spend time writing our own GitHub API client we’re going to make use of <a href="https://github.com/edgurgel/tentacat">Tentacat</a>.</li>
  <li>Using the result of the API search, process the user’s result
    <ol>
      <li>In the event a user <strong>is</strong> a contributor, have them confirm the email address they want to use for Slack, use the Slack API to send an invite, and finally congratulate them.</li>
      <li>If they <strong>have not</strong> contributed we need to notify them of their ineligibility</li>
    </ol>
  </li>
</ol>

<h3 id="login-with-github">Login with GitHub</h3>

<p>Starting from a new Phoenix project (<code class="highlighter-rouge">mix phx.new admissions</code>)  we looked at how to support GitHub login. For that we need a new dependency: <code class="highlighter-rouge">ueberauth_github</code>:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">defp</span> <span class="n">deps</span> <span class="k">do</span>
    <span class="p">[</span>
      <span class="p">{</span><span class="ss">:gettext</span><span class="p">,</span> <span class="s2">"~&gt; 0.11"</span><span class="p">},</span>
      <span class="p">{</span><span class="ss">:phoenix</span><span class="p">,</span> <span class="s2">"~&gt; 1.4.0"</span><span class="p">},</span>
      <span class="p">{</span><span class="ss">:phoenix_html</span><span class="p">,</span> <span class="s2">"~&gt; 2.11"</span><span class="p">},</span>
      <span class="p">{</span><span class="ss">:plug_cowboy</span><span class="p">,</span> <span class="s2">"~&gt; 2.0"</span><span class="p">},</span>
      <span class="p">{</span><span class="ss">:ueberauth_github</span><span class="p">,</span> <span class="s2">"~&gt; 0.7.0"</span><span class="p">},</span>

      <span class="p">{</span><span class="ss">:phoenix_live_reload</span><span class="p">,</span> <span class="s2">"~&gt; 1.2"</span><span class="p">,</span> <span class="ss">only:</span> <span class="ss">:dev</span><span class="p">}</span>
    <span class="p">]</span>
  <span class="k">end</span>
</code></pre></div></div>

<blockquote>
  <p>We won’t need to include <code class="highlighter-rouge">ueberauth</code> itself, as a dependency  of <code class="highlighter-rouge">ueberauth_github</code> it is included for us.</p>
</blockquote>

<blockquote>
  <p>Helpful tip: Did you know you can use <code class="highlighter-rouge">mix hex.info &lt;package name&gt;</code> to get the latest version? Try it!</p>
</blockquote>

<p>With our application empowered with our new dependency what’s left to do? Plenty! To finish our integration with Ueberauth we had a few subtasks:</p>

<ol>
  <li>
    <p>Create a <code class="highlighter-rouge">AuthController</code> that’ll handle the callback phase of the OAuth request.</p>
  </li>
  <li>
    <p>Include our new controller and route in our <code class="highlighter-rouge">router.ex</code> file.</p>
  </li>
  <li>
    <p>Put the required configuration for Ueberauth in our <code class="highlighter-rouge">config/config.exs</code> file.</p>
  </li>
  <li>
    <p>Add a button to the UI for login. While we won’t spend time in this article building the UI, we will touch on the required pieces.</p>
  </li>
  <li>
    <p>Setting up your application on GitHub. Here you’ll also need to retrieve your <code class="highlighter-rouge">CLIENT_ID</code> and <code class="highlighter-rouge">CLIENT_SECRET</code> .</p>

    <blockquote>
      <p>GitHub setup and configuration goes beyond this article. If you aren’t quite sure what to do, head over to GitHub’s Developer article <a href="https://developer.github.com/apps/building-oauth-apps/authorizing-oauth-apps/">Authorizing OAuth Apps</a></p>
    </blockquote>
  </li>
</ol>

<p>Onward!</p>

<h4 id="our-new-controller">Our new controller</h4>

<p>Completing our first subtask requires we create a new controller for Ueberauth that will handle the OAuth callback from GitHub in the event of successful login. The only hard requirement for our controller is that we include the Ueberauth plug:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">defmodule</span> <span class="no">AdmissionsWeb</span><span class="o">.</span><span class="no">AuthController</span> <span class="k">do</span>
  <span class="kn">use</span> <span class="no">AdmissionsWeb</span><span class="p">,</span> <span class="ss">:controller</span>

  <span class="n">plug</span> <span class="no">Ueberauth</span>
<span class="k">end</span>
</code></pre></div></div>

<p>With the plug in place, we’ll define a function to handle our requests. We’ve elected to name that function <code class="highlighter-rouge">callback/2</code>. This function needs to retrieve the user details Ueberauth has so conveniently placed into the <code class="highlighter-rouge">Plug.Conn</code> assigns for us. The fields we’re concerned with are the user’s email and GitHub nickname:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">defmodule</span> <span class="no">AdmissionsWeb</span><span class="o">.</span><span class="no">AuthController</span> <span class="k">do</span>
  <span class="kn">use</span> <span class="no">AdmissionsWeb</span><span class="p">,</span> <span class="ss">:controller</span>

  <span class="n">plug</span> <span class="no">Ueberauth</span>

  <span class="k">def</span> <span class="n">callback</span><span class="p">(%{</span><span class="ss">assigns:</span> <span class="p">%{</span><span class="ss">ueberauth_auth:</span> <span class="n">ueberauth_auth</span><span class="p">}}</span> <span class="o">=</span> <span class="n">conn</span><span class="p">,</span> <span class="n">_params</span><span class="p">)</span> <span class="k">do</span>
    <span class="p">%{</span><span class="ss">info:</span> <span class="p">%{</span><span class="ss">email:</span> <span class="n">email</span><span class="p">,</span> <span class="ss">nickname:</span> <span class="n">nickname</span><span class="p">}}</span> <span class="o">=</span> <span class="n">ueberauth_auth</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>There’s no need to concern ourselves <em>in this instance</em> with a match error because all successful logins will contain the aforementioned fields.</p>

<p>Now that we’ve got what we need, we need to forward the user on to the next step in the process: determining eligibility. To ensure we’ve got what we need in the next step, we chose to put our GitHub data into the session and then redirect the user to the eligibility check:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">defmodule</span> <span class="no">AdmissionsWeb</span><span class="o">.</span><span class="no">AuthController</span> <span class="k">do</span>
  <span class="kn">use</span> <span class="no">AdmissionsWeb</span><span class="p">,</span> <span class="ss">:controller</span>

  <span class="n">plug</span> <span class="no">Ueberauth</span>

  <span class="k">def</span> <span class="n">callback</span><span class="p">(%{</span><span class="ss">assigns:</span> <span class="p">%{</span><span class="ss">ueberauth_auth:</span> <span class="n">ueberauth_auth</span><span class="p">}}</span> <span class="o">=</span> <span class="n">conn</span><span class="p">,</span> <span class="n">_params</span><span class="p">)</span> <span class="k">do</span>
    <span class="p">%{</span><span class="ss">info:</span> <span class="p">%{</span><span class="ss">email:</span> <span class="n">email</span><span class="p">,</span> <span class="ss">nickname:</span> <span class="n">nickname</span><span class="p">}}</span> <span class="o">=</span> <span class="n">ueberauth_auth</span>

    <span class="n">conn</span>
    <span class="o">|&gt;</span> <span class="n">put_session</span><span class="p">(</span><span class="ss">:github</span><span class="p">,</span> <span class="p">%{</span><span class="ss">email:</span> <span class="n">email</span><span class="p">,</span> <span class="ss">nickname:</span> <span class="n">nickname</span><span class="p">,</span> <span class="ss">token:</span> <span class="n">token</span><span class="p">})</span>
    <span class="o">|&gt;</span> <span class="n">redirect</span><span class="p">(</span><span class="ss">to:</span> <span class="no">Routes</span><span class="o">.</span><span class="n">registrar_path</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="ss">:eligibility</span><span class="p">))</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>With that in place we’re done with our controller and can move on to the next subtask, updating our <code class="highlighter-rouge">router.ex</code>. We’ll be implementing our <code class="highlighter-rouge">eligibility</code> request handler shortly.</p>

<h4 id="updating-phoenixs-router">Updating Phoenix’s router</h4>

<p>Updating the router for Ueberauth is a fairly easy and straightforward change. At the bottom of our <code class="highlighter-rouge">router.ex</code> we added the following scope block:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scope</span> <span class="s2">"/auth"</span><span class="p">,</span> <span class="no">AdmissionsWeb</span> <span class="k">do</span>
  <span class="n">pipe_through</span> <span class="ss">:browser</span>

  <span class="n">get</span> <span class="s2">"/github"</span><span class="p">,</span> <span class="no">AuthController</span><span class="p">,</span> <span class="ss">:request</span>
  <span class="n">get</span> <span class="s2">"/github/callback"</span><span class="p">,</span> <span class="no">AuthController</span><span class="p">,</span> <span class="ss">:callback</span>
<span class="k">end</span>
</code></pre></div></div>

<p>We added 2 routes but only 1 request handler, <code class="highlighter-rouge">callback/2</code> in our controller so what gives? Remember <code class="highlighter-rouge">plug Ueberauth</code> from our controller? Our good friend Ueberauth takes care of that request phase of the OAuth exchange saving us the hassle.</p>

<p>At this stage we’re almost done with our integration. Now we can move on to configuring Ueberauth for our application.</p>

<h4 id="ueberauth-configuration">Ueberauth configuration</h4>

<p>The Ueberauth GitHub strategy’s documentation provided us everything we needed. Since we need the user’s email and profile access we had to update our scopes to <code class="highlighter-rouge">user:email,user:profile</code> per GitHub’s documentation.</p>

<p>The resulting changes to our <code class="highlighter-rouge">config.exs</code> looked like this:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">config</span> <span class="ss">:ueberauth</span><span class="p">,</span> <span class="no">Ueberauth</span><span class="p">,</span>
  <span class="ss">providers:</span> <span class="p">[</span>
    <span class="ss">github:</span> <span class="p">{</span><span class="no">Ueberauth</span><span class="o">.</span><span class="no">Strategy</span><span class="o">.</span><span class="no">Github</span><span class="p">,</span> <span class="p">[</span><span class="ss">default_scope:</span> <span class="s2">"user:email,user:profile"</span><span class="p">,</span> <span class="ss">send_redirect_uri:</span> <span class="no">false</span><span class="p">]}</span>
  <span class="p">]</span>

<span class="n">config</span> <span class="ss">:ueberauth</span><span class="p">,</span> <span class="no">Ueberauth</span><span class="o">.</span><span class="no">Strategy</span><span class="o">.</span><span class="no">Github</span><span class="o">.</span><span class="no">OAuth</span><span class="p">,</span>
  <span class="ss">client_id:</span> <span class="no">System</span><span class="o">.</span><span class="n">get_env</span><span class="p">(</span><span class="s2">"GITHUB_CLIENT_ID"</span><span class="p">),</span>
  <span class="ss">client_secret:</span> <span class="no">System</span><span class="o">.</span><span class="n">get_env</span><span class="p">(</span><span class="s2">"GITHUB_CLIENT_SECRET"</span><span class="p">)</span>
</code></pre></div></div>

<p>With <code class="highlighter-rouge">System.get_env/1</code> we avoid checking secret values into source control in addition to supporting changes to those values at runtime. We populate the <code class="highlighter-rouge">GITHUB_CLIENT_ID</code> and <code class="highlighter-rouge">GITHUB_CLIENT_SECRET</code> system ENVs in a later step using values retrieved from our GitHub application settings.</p>

<blockquote>
  <p>Confused about compile and runtime configuration? Check out our blog post <a href="https://elixirschool.com/blog/configuration-demystified/">Configuration Demystified</a> to learn more.</p>
</blockquote>

<p>An optional but strongly encouraged configuration is to update the <code class="highlighter-rouge">oauth2</code> serializer to use the newer JSON library <a href="https://github.com/michalmuskala/jason">Jason</a>:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">config</span> <span class="ss">:oauth2</span><span class="p">,</span>
  <span class="ss">serializers:</span> <span class="p">%{</span>
    <span class="s2">"application/json"</span> <span class="o">=&gt;</span> <span class="no">Jason</span>
  <span class="p">}</span>
</code></pre></div></div>

<p>To do this we added <code class="highlighter-rouge">jason</code> to our <code class="highlighter-rouge">mix.exs</code> just as we did before with <code class="highlighter-rouge">ueberauth_github</code>.</p>

<h4 id="sign-in-button">Sign-in button</h4>

<p>To kick off the auth flow for GitHub logins we need the user to click a link for the earlier request route we defined. To do that we added the following HTML to our <code class="highlighter-rouge">index.html.eex</code> file:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"button is-info is-medium"</span> <span class="na">href=</span><span class="s">"/auth/github"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"icon"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">"fab fa-github"</span><span class="nt">&gt;&lt;/i&gt;</span>
  <span class="nt">&lt;/span&gt;</span>
  <span class="nt">&lt;span&gt;</span>Sign-in with GitHub<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/a&gt;</span>
</code></pre></div></div>

<p>Now that our UI is updated we can call our Ueberauth integration code complete! The last step for us was setting up the application on GitHub. Once complete we pulled the <code class="highlighter-rouge">CLIENT_ID</code> and <code class="highlighter-rouge">CLIENT_SECRET</code> from the application settings and added them to our ENV.</p>

<p>A user can now sign-in with a valid GitHub account. We need to handle the next step in the process: eligibility.</p>

<h3 id="verifying-contributor-status">Verifying contributor status</h3>

<p>At this stage in the request our user has successfully authenticated with GitHub and now we need to determine if they’ve contributed to any of our repositories. To achieve this we need to leverage the GitHub API. For this portion of the application the high level of what we’re doing looks like:</p>

<p><img src="https://user-images.githubusercontent.com/73386/67163600-19e51700-f32e-11e9-89c3-a14b6a9bde8d.png" alt="image" /></p>

<p>In the interest of not reinventing the wheel we opted for the <a href="https://github.com/edgurgel/tentacat">Tentacat</a> library. At this point in our journey our <code class="highlighter-rouge">mix.exs</code> dependencies looked like this:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">defp</span> <span class="n">deps</span> <span class="k">do</span>
    <span class="p">[</span>
      <span class="p">{</span><span class="ss">:gettext</span><span class="p">,</span> <span class="s2">"~&gt; 0.11"</span><span class="p">},</span>
      <span class="p">{</span><span class="ss">:jason</span><span class="p">,</span> <span class="s2">"~&gt; 1.0"</span><span class="p">},</span>
      <span class="p">{</span><span class="ss">:phoenix</span><span class="p">,</span> <span class="s2">"~&gt; 1.4.0"</span><span class="p">},</span>
      <span class="p">{</span><span class="ss">:phoenix_html</span><span class="p">,</span> <span class="s2">"~&gt; 2.11"</span><span class="p">},</span>
      <span class="p">{</span><span class="ss">:plug_cowboy</span><span class="p">,</span> <span class="s2">"~&gt; 2.0"</span><span class="p">},</span>
      <span class="p">{</span><span class="ss">:tentacat</span><span class="p">,</span> <span class="s2">"~&gt; 1.5"</span><span class="p">},</span>
      <span class="p">{</span><span class="ss">:ueberauth_github</span><span class="p">,</span> <span class="s2">"~&gt; 0.7.0"</span><span class="p">},</span>

      <span class="p">{</span><span class="ss">:phoenix_live_reload</span><span class="p">,</span> <span class="s2">"~&gt; 1.2"</span><span class="p">,</span> <span class="ss">only:</span> <span class="ss">:dev</span><span class="p">}</span>
    <span class="p">]</span>
  <span class="k">end</span>
</code></pre></div></div>

<p>With our new dependency in place we can fetch (<code class="highlighter-rouge">mix deps.get</code>) and get on our way. Keeping our controller’s simple and focused on presentation is a goal we always shoot for so we decided to implement the eligibility code in a separate module outside of the web portion of our application.</p>

<p>We’ve called this new module <code class="highlighter-rouge">Registrar</code> in keeping with our college theme, it can be found in the <code class="highlighter-rouge">lib/admissions/registrar.ex</code> file.</p>

<blockquote>
  <p>### reg·is·trar</p>

  <ol>
    <li>An official in a college or university who is responsible for keeping student records.</li>
  </ol>
</blockquote>

<p>Given the flow above we determined the best way to achieve this would be to check a list of repositories in our organization (with support for multiple organizations) for contributors who matched our user’s GitHub nickname. To this end we knew we’d need to store the organization’s name and its repositories. For this we opted to use a map where an organization name’s is the key and the value is a list of repositories. To avoid any type casting we elected to store everything as strings, the end result of which was added to our <code class="highlighter-rouge">config.exs</code>:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">config</span> <span class="ss">:admissions</span><span class="p">,</span> <span class="ss">repositories:</span> <span class="p">%{</span>
  <span class="s2">"elixirschool"</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s2">"elixirschool"</span><span class="p">,</span> <span class="s2">"admissions"</span><span class="p">,</span> <span class="s2">"extracurricular"</span><span class="p">,</span> <span class="s2">"homework"</span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div></div>

<blockquote>
  <p>To support some future plans we opted to support multiple organizations. This also allows other organizations and companies to leverage the Admissions.</p>
</blockquote>

<p>When implementing the actual checks we found breaking things up into a few functions worked best to keep the code clean and readable. We ended up with 4 functions in our new <code class="highlighter-rouge">lib/admissions/registrar.ex</code> file:</p>

<ol>
  <li>Our only public function <code class="highlighter-rouge">eligibile?/1</code> takes a nickname.</li>
  <li>A private function <code class="highlighter-rouge">org_contributor?/3</code> which takes the GitHub API client we’ll create with the token, the user’s nickname, and lastly a key-value pair from our <code class="highlighter-rouge">config :admissions, repositories</code> map.</li>
  <li>A function to check each repository’s contributors for our user: <code class="highlighter-rouge">contributor?/4</code>. We’ll need the GitHub API client, nickname, organization, and a repository.</li>
  <li>Lastly, a function to retrieve our configuration from above: <code class="highlighter-rouge">organizations/0</code>. We prefer to use functions in place of module attributes when loading configuration values.</li>
</ol>

<p>To get it out of the way tackled the easiest function, <code class="highlighter-rouge">organization/0</code>, where we do no more than get our configuration:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="n">organizations</span><span class="p">,</span> <span class="k">do</span><span class="p">:</span> <span class="no">Application</span><span class="o">.</span><span class="n">get_env</span><span class="p">(</span><span class="ss">:admissions</span><span class="p">,</span> <span class="ss">:repositories</span><span class="p">)</span>
</code></pre></div></div>

<p>With our configuration available we can iterate over the organizations and look for contributor status. For that we’ll need to create a Tentacat GitHub API client. Let’s take a peek at what we ended up with in our <code class="highlighter-rouge">eligible?/2</code> function:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="n">eligible?</span><span class="p">(</span><span class="n">nickname</span><span class="p">)</span> <span class="k">do</span>
  <span class="n">client</span> <span class="o">=</span> <span class="no">Client</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>
  <span class="no">Enum</span><span class="o">.</span><span class="n">any?</span><span class="p">(</span><span class="n">organizations</span><span class="p">(),</span> <span class="o">&amp;</span><span class="n">org_contributor?</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">nickname</span><span class="p">,</span> <span class="nv">&amp;1</span><span class="p">))</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Here we create a <code class="highlighter-rouge">Tentacat.Client</code> and iterate over configured organizations using <code class="highlighter-rouge">Enum.any?/2</code>. We don’t much care for complex anonymous functions so we elected to create <code class="highlighter-rouge">org_contributor/2</code> . This function is simple enough: Take single organization from our configuration and iterate through the repositories looking for a match:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">defp</span> <span class="n">org_contributor?</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">nickname</span><span class="p">,</span> <span class="p">{</span><span class="n">org</span><span class="p">,</span> <span class="n">repos</span><span class="p">})</span> <span class="k">do</span>
  <span class="no">Enum</span><span class="o">.</span><span class="n">any?</span><span class="p">(</span><span class="n">repos</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">contributor?</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">nickname</span><span class="p">,</span> <span class="n">org</span><span class="p">,</span> <span class="nv">&amp;1</span><span class="p">))</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Last but not least is our <code class="highlighter-rouge">contributor?/4</code> function that does the real work.  We have to retrieve the list of contributors for a repository and verify whether or not our nickname is present in the list. Thanks to Tentacat this is fairly easy using the <code class="highlighter-rouge">Tentacat.Repositories.Contributors</code> module and <code class="highlighter-rouge">list/3</code> function which returns a tuple including a list of our contributors, the other values we can ignore:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">defp</span> <span class="n">contributor?</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">nickname</span><span class="p">,</span> <span class="n">org</span><span class="p">,</span> <span class="n">repo</span><span class="p">)</span> <span class="k">do</span>
  <span class="k">case</span> <span class="no">Contributors</span><span class="o">.</span><span class="n">list</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">org</span><span class="p">,</span> <span class="n">repo</span><span class="p">)</span> <span class="k">do</span>
    <span class="p">{</span><span class="n">_status</span><span class="p">,</span> <span class="n">contributors</span><span class="p">,</span> <span class="n">_response</span><span class="p">}</span> <span class="o">-&gt;</span>
      <span class="no">Enum</span><span class="o">.</span><span class="n">any?</span><span class="p">(</span><span class="n">contributors</span><span class="p">,</span> <span class="o">&amp;</span><span class="p">(</span><span class="no">Map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nv">&amp;1</span><span class="p">,</span> <span class="s2">"login"</span><span class="p">)</span> <span class="o">==</span> <span class="n">nickname</span><span class="p">))</span>
    <span class="n">_</span> <span class="o">-&gt;</span>
      <span class="no">false</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>The contributor list is a collection of maps containing <em>all</em> of the information pertaining to a GitHub user but we’re most interested in the<code class="highlighter-rouge">"login"</code> key, the user’s nickname.</p>

<p>Now we can finally answer the question: Are they a contributor?</p>

<h3 id="processing-the-users-request">Processing the user’s request</h3>

<p>Now that we know whether or not the user is a contributor we need to do something with that. If they <strong>are not</strong> a contributor they can’t proceed and we should tell them as much. However, if they <strong>are</strong> a contributor then we need to verify their email address so we can send them an invitation via the Slack API. Visualized, our flow looks something like this:</p>

<p><img src="https://user-images.githubusercontent.com/73386/67163615-35502200-f32e-11e9-8204-294d73790e0c.png" alt="image" /></p>

<h4 id="handling-eligibility">Handling eligibility</h4>

<p>Using our new <code class="highlighter-rouge">Registrar.eligible?/1</code> function we’ll implement the <code class="highlighter-rouge">RegistrarController</code>’s <code class="highlighter-rouge">eligibility/2</code> route handler we briefly discussed earlier. This will be the point in our flow where our user’s path diverge based on their contributor status. We concluded the simplest approach for this would be deciding the view template based on the answer to our question, with eligible users seeing <code class="highlighter-rouge">eligible.html</code> which includes the email address verification step and <code class="highlighter-rouge">ineligible.html</code> for all others.</p>

<p>To accomplish our goal we retrieve our user’s information from our session, call into our new <code class="highlighter-rouge">eligible?/1</code> function, decide on our template, and finally call <code class="highlighter-rouge">render/3</code> with our connection, template, and the user’s email and GitHub username:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="n">eligibility</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="n">_params</span><span class="p">)</span> <span class="k">do</span>
  <span class="p">%{</span><span class="ss">email:</span> <span class="n">email</span><span class="p">,</span> <span class="ss">nickname:</span> <span class="n">nickname</span><span class="p">}</span> <span class="o">=</span> <span class="n">get_session</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="ss">:github</span><span class="p">)</span>

  <span class="n">template</span> <span class="o">=</span> <span class="k">if</span> <span class="no">Registrar</span><span class="o">.</span><span class="n">eligible?</span><span class="p">(</span><span class="n">nickname</span><span class="p">),</span> <span class="k">do</span><span class="p">:</span> <span class="s2">"eligible.html"</span><span class="p">,</span> <span class="k">else</span><span class="p">:</span> <span class="s2">"ineligible.html"</span>

  <span class="n">render</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="n">template</span><span class="p">,</span> <span class="p">%{</span><span class="ss">email:</span> <span class="n">email</span><span class="p">,</span> <span class="ss">nickname:</span> <span class="n">nickname</span><span class="p">})</span>
<span class="k">end</span>
</code></pre></div></div>

<p>With our new function in place we added the new <code class="highlighter-rouge">/eligibility</code> route to the <code class="highlighter-rouge">router.ex</code> file, this time adding the <code class="highlighter-rouge">:auth</code> pipeline to limit access to only authenticated users. While we’re in the router file we can add the next route we’ll need, a <code class="highlighter-rouge">POST</code> for the email address submission:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scope</span> <span class="s2">"/"</span><span class="p">,</span> <span class="no">AdmissionsWeb</span> <span class="k">do</span>
  <span class="n">pipe_through</span> <span class="p">[</span><span class="ss">:browser</span><span class="p">,</span> <span class="ss">:auth</span><span class="p">]</span>

  <span class="n">get</span> <span class="s2">"/eligibility"</span><span class="p">,</span> <span class="no">RegistrarController</span><span class="p">,</span> <span class="ss">:eligibility</span>
  <span class="n">post</span> <span class="s2">"/register"</span><span class="p">,</span> <span class="no">RegistrarController</span><span class="p">,</span> <span class="ss">:register</span>
<span class="k">end</span>
</code></pre></div></div>

<p>At this point non-contributors have been handled, they’re encouraged to find opportunities to contribute and try again later. Our contributors have 1 final step left: verifying the email address they’d like their invite sent to.</p>

<h4 id="slack-invitation">Slack invitation</h4>

<p>We have reached our very final step: inviting contributors to Slack! To do this will require the use of the official Slack API and the <code class="highlighter-rouge">users.admin.invite</code> function they provide. This request must be a form POST with the user’s email we collected in the last step and our organization’s Slack token, there are some optional Slack settings you can include as well.</p>

<blockquote>
  <p>You can find more on the Slack API in the official documentation at https://api.slack.com/</p>
</blockquote>

<p>Once we handled our response we had a working API client:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">defmodule</span> <span class="no">Admissions</span><span class="o">.</span><span class="no">Slack</span> <span class="k">do</span>
  <span class="nv">@invite_url</span> <span class="s2">"https://elixirschool.slack.com/api/users.admin.invite"</span>

  <span class="k">def</span> <span class="n">invite</span><span class="p">(</span><span class="n">email</span><span class="p">)</span> <span class="k">do</span>
    <span class="n">email</span>
    <span class="o">|&gt;</span> <span class="n">slack_invite</span><span class="p">()</span>
    <span class="o">|&gt;</span> <span class="n">slack_response</span><span class="p">()</span>
  <span class="k">end</span>

  <span class="k">defp</span> <span class="n">slack_invite</span><span class="p">(</span><span class="n">email</span><span class="p">)</span> <span class="k">do</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="ss">email:</span> <span class="n">email</span><span class="p">,</span> <span class="ss">set_active:</span> <span class="no">true</span><span class="p">,</span> <span class="ss">token:</span> <span class="n">slack_token</span><span class="p">()]</span>
    <span class="no">HTTPoison</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="nv">@invite_url</span><span class="p">,</span> <span class="p">{</span><span class="ss">:form</span><span class="p">,</span> <span class="n">data</span><span class="p">})</span>
  <span class="k">end</span>

  <span class="k">defp</span> <span class="n">slack_response</span><span class="p">({</span><span class="ss">:ok</span><span class="p">,</span> <span class="p">%{</span><span class="ss">body:</span> <span class="n">body</span><span class="p">}})</span> <span class="k">do</span>
    <span class="k">case</span> <span class="no">Jason</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">body</span><span class="p">)</span> <span class="k">do</span>
      <span class="p">{</span><span class="ss">:ok</span><span class="p">,</span> <span class="p">%{</span><span class="s2">"ok"</span> <span class="o">=&gt;</span> <span class="no">true</span><span class="p">}}</span> <span class="o">-&gt;</span> <span class="ss">:ok</span>
      <span class="p">{</span><span class="ss">:ok</span><span class="p">,</span> <span class="p">%{</span><span class="s2">"error"</span> <span class="o">=&gt;</span> <span class="n">reason</span><span class="p">}}</span> <span class="o">-&gt;</span> <span class="p">{</span><span class="ss">:error</span><span class="p">,</span> <span class="n">reason</span><span class="p">}</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="k">defp</span> <span class="n">slack_response</span><span class="p">({</span><span class="ss">:error</span><span class="p">,</span> <span class="n">_reason</span><span class="p">})</span> <span class="k">do</span>
    <span class="p">{</span><span class="ss">:error</span><span class="p">,</span> <span class="s2">"unexpected_error"</span><span class="p">}</span>
  <span class="k">end</span>

  <span class="k">defp</span> <span class="n">slack_token</span><span class="p">,</span> <span class="k">do</span><span class="p">:</span> <span class="no">System</span><span class="o">.</span><span class="n">get_env</span><span class="p">(</span><span class="s2">"SLACK_TOKEN"</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div>

<p>With an API client in hand all that remains is implementing the <code class="highlighter-rouge">/register</code> route handler. To do this we outlined what was expected of our new function and set to work building it:</p>

<ol>
  <li>Knowing our request a body has the <code class="highlighter-rouge">"email"</code> key, pattern matching is used to get the value we care about: their email address.</li>
  <li>Our new Slack API client is used to trigger and invite</li>
  <li>We handle the result
    <ol>
      <li>On success we show them a welcome page</li>
      <li>On failure we show them an error message. The Slack documentation outlines a few error codes we’ll match on and translate into human readable messages: <code class="highlighter-rouge">already_in_team</code>, <code class="highlighter-rouge">already_invited</code>, <code class="highlighter-rouge">invalid_email</code>, and lastly the <code class="highlighter-rouge">unexpected_error</code> we returned in the client.</li>
    </ol>
  </li>
</ol>

<p>Once we’d decided on the work updating the <code class="highlighter-rouge">RegistrarController</code> was straight forward:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="n">register</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="p">%{</span><span class="s2">"email"</span> <span class="o">=&gt;</span> <span class="n">email</span><span class="p">})</span> <span class="k">do</span>
  <span class="k">case</span> <span class="no">Slack</span><span class="o">.</span><span class="n">invite</span><span class="p">(</span><span class="n">email</span><span class="p">)</span> <span class="k">do</span>
    <span class="ss">:ok</span> <span class="o">-&gt;</span>
      <span class="n">render</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="s2">"welcome.html"</span><span class="p">)</span>
    <span class="p">{</span><span class="ss">:error</span><span class="p">,</span> <span class="n">reason</span><span class="p">}</span> <span class="o">-&gt;</span>
      <span class="n">message</span> <span class="o">=</span> <span class="n">translated_message</span><span class="p">(</span><span class="n">reason</span><span class="p">)</span>
      <span class="n">render</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="s2">"error.html"</span><span class="p">,</span> <span class="ss">message:</span> <span class="n">message</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">defp</span> <span class="n">translated_message</span><span class="p">(</span><span class="s2">"already_in_team"</span><span class="p">),</span> <span class="k">do</span><span class="p">:</span> <span class="s2">"Already in team"</span>
<span class="k">defp</span> <span class="n">translated_message</span><span class="p">(</span><span class="s2">"already_invited"</span><span class="p">),</span> <span class="k">do</span><span class="p">:</span> <span class="s2">"Already invited"</span>
<span class="k">defp</span> <span class="n">translated_message</span><span class="p">(</span><span class="s2">"invalid_email"</span><span class="p">),</span> <span class="k">do</span><span class="p">:</span> <span class="s2">"Invalid email address"</span>
<span class="k">defp</span> <span class="n">translated_message</span><span class="p">(</span><span class="s2">"unexpected_error"</span><span class="p">),</span> <span class="k">do</span><span class="p">:</span> <span class="s2">"Unexpected error"</span>
</code></pre></div></div>

<p>We’ve already added a route for this function so we’re done. Like done done. We have a functioning application that requires sign in with GitHub, confirms their contributor status, and invites them to Slack when appropriate. Since the organizations are configurable there’s no stopping other organizations from using Admissions, how cool!</p>

<p>Have you contributed to an Elixir School project but not yet joined Slack? Head over to <a href="http://admissions.elixirschool.com/">http://admissions.elixirschool.com</a> and check your eligibility!</p>

<p>Interested in seeing the code in it’s entirity? Looking for a contribution opportunity to unlock Slack access? You can find the project on GitHub at https://github.com/elixirschool/admissions.</p>

    
    <div class="tags">
      <h4 class="title">Article tags</h4>
      
        <span class="tag"><a href="/blog/tags/admissions/">admissions</a></span>
      
      </div>
    </p>
    

    <blockquote class="edit-lesson">
      Caught a mistake or want to contribute to the article?
      <a href="https://github.com/elixirschool/elixirschool/edit/master/_posts/2019-10-23-building-admissions.md" target="_blank" rel="noopener">
        Edit this page on GitHub!
      </a>
    </blockquote>
  </div>
</section>
<section class="section-prevnext">
  <div class="row">
    <div class="6u 12u$(small)">
      
        <h4 class="title is-7 has-text-grey-light">Previous article</h4>
        <a class="button special fit" href="http://localhost:4000/blog/sorting-a-table-with-live-view-live-links/" title="Building a Table Sort UI with Live View's `live_link`" rel="prev">&laquo; Building a Table Sort UI with Live View's `live...</a>
      
    </div>
    <div class="6u 12u$(small)">
      
        <h4>Next article</h4>
        <a class="button special fit" href="http://localhost:4000/blog/live-view-live-component/" title="LiveView Design Patterns - LiveComponent and the Single Responsibility Principle" rel="next">LiveView Design Patterns - LiveComponent and th... &raquo;</a>
      
    </div>
  </div>
</section>

<section>

    
  
    <div class="row profile">
  <div class="1u 2u(medium) 12u$(small)"><img src="https://github.com/doomspork.png" alt="" style="max-width: 60px;"></div>
  <div class="11u 10u(medium) 12u$(small)">
    <h2>
    
      <a href="https://github.com/doomspork">Sean Callan</a>
    
    </h2>
    <p class="content">Sean has been passionately involved with Elixir since the very beginning. After experiencing the joys of working with Elixir he created Elixir School and has become a core contributor to numerous libraries. During the day, Sean helps companies transition teams and codebases to Elixir.</p>
    <ul class="icons">
      
      <li><a href="https://seancallan.com" class="icon fa-globe"><span class="label">Homepage</span></a></li>
      
      
      <li><a href="https://twitter.com/doomspork" class="icon fa-twitter"><span class="label">Twitter</span></a></li>
      
      <li><a href="https://github.com/doomspork" class="icon fa-github"><span class="label">Github</span></a></li>
    </ul>
  </div>
</div>

  
</section>

				</div>
			</div>
			<!-- Sidebar -->
  <div id="sidebar">
    <p class="toggle-theme-wrapper"><a rel="noopener" href="#toggle-theme" class="toggle-theme icon fas fa-circle-o" alt="Toggle Theme" title="Toggle Theme"></a></p>

    <div class="inner">
      

      
<!-- Menu -->
<nav id="menu">
  <span class="stack-info otp-version">Elixir 1.10.1 - Erlang/OTP 22.0 [erts-10.5.3]</span>
  <header class="major">
    <h2></h2>
    <p>The premier destination for learning and mastering Elixir</p>
  </header>
  <ul>
    <li>
      <a href="/" class=" up ">Home</a>
    </li>
  
    
    
    
    
    
  
    
    
    
    
    
      
        
        <li>
          <span class="opener up">Basics</span>
          <ul>
        
            <li>
              
              <a href="/en/lessons/basics/basics/">1. Basics</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/basics/collections/">2. Collections</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/basics/enum/">3. Enum</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/basics/pattern-matching/">4. Pattern Matching</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/basics/control-structures/">5. Control Structures</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/basics/functions/">6. Functions</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/basics/pipe-operator/">7. Pipe Operator</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/basics/modules/">8. Modules</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/basics/mix/">9. Mix</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/basics/sigils/">10. Sigils</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/basics/documentation/">11. Documentation</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/basics/testing/">12. Testing</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/basics/comprehensions/">13. Comprehensions</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/basics/strings/">14. Strings</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/basics/date-time/">15. Date and Time</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/basics/mix-tasks/">16. Custom Mix Tasks</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/basics/iex-helpers/">17. IEx Helpers</a>
              
            </li>
        
          </ul>
        </li>
        
      
    
  
    
    
    
    
    
      
        
        <li>
          <span class="opener up">Advanced</span>
          <ul>
        
            <li>
              
              <a href="/en/lessons/advanced/erlang/">1. Erlang Interoperability</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/advanced/error-handling/">2. Error Handling</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/advanced/escripts/">3. Executables</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/advanced/concurrency/">4. Concurrency</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/advanced/otp-concurrency/">5. OTP Concurrency</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/advanced/otp-supervisors/">6. OTP Supervisors</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/advanced/otp-distribution/">7. OTP Distribution</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/advanced/metaprogramming/">8. Metaprogramming</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/advanced/umbrella-projects/">9. Umbrella Projects</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/advanced/typespec/">10. Specifications and types</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/advanced/behaviours/">11. Behaviours</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/advanced/gen-stage/">12. GenStage</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/advanced/protocols/">13. Protocols</a>
              
            </li>
        
          </ul>
        </li>
        
      
    
  
    
    
    
    
    
      
        
        <li>
          <span class="opener up">Ecto</span>
          <ul>
        
            <li>
              
              <a href="/en/lessons/ecto/basics/">1. Basics</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/ecto/changesets/">2. Changesets</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/ecto/associations/">3. Associations</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/ecto/querying/">4. Querying</a>
              
            </li>
        
          </ul>
        </li>
        
      
    
  
    
    
    
    
    
      
        
        <li>
          <span class="opener up">Specifics</span>
          <ul>
        
            <li>
              
              <a href="/en/lessons/specifics/plug/">1. Plug</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/specifics/eex/">2. Embedded Elixir (EEx)</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/specifics/ets/">3. Erlang Term Storage (ETS)</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/specifics/mnesia/">4. Mnesia</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/specifics/debugging/">5. Debugging</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/specifics/nerves/">6. Nerves</a>
              
            </li>
        
          </ul>
        </li>
        
      
    
  
    
    
    
    
    
      
        
        <li>
          <span class="opener up">Libraries</span>
          <ul>
        
            <li>
              
              <a href="/en/lessons/libraries/guardian/">1. Guardian (Basics)</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/libraries/poolboy/">2. Poolboy</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/libraries/benchee/">3. Benchee</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/libraries/bypass/">4. Bypass</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/libraries/distillery/">5. Distillery (Basics)</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/libraries/stream-data/">6. StreamData</a>
              
            </li>
        
          </ul>
        </li>
        
      
    
  
    <li>
      <a href="/blog/" class=" up active">Blog</a>
    </li>
    
    <li>
      <a href="/contributors/" class=" up ">Contributors</a>
    </li>
  </ul>
</nav>

      <!-- Footer -->
      <footer id="footer">
        <p class="copyright">&copy; 2021 <a target="_blank" rel="noopener" href="https://github.com/doomspork">Sean Callan</a> All rights reserved.</p>
      </footer>
    </div>
  </div>

		</div>
		<!-- Scripts -->

    <script async="" src="/assets/main-f8c201d2721dcb6d1d4f6acb0ebd2b2c192757ed29271f519513e4417e347611.js" type="text/javascript"></script>
		<!--[if lte IE 8]><script async="" src="/assets/ie/respond.min-8306093ccce666c01dab405fac0d16596a1d1cf38aa0ba919d4831261662cdbb.js" type="text/javascript"></script><script src="assets/js/ie/respond.min.js"></script><![endif]-->
	</body>
</html>
