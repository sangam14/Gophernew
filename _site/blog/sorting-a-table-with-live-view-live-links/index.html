<!DOCTYPE HTML>



<html lang="en">
	<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta name="description" content="">
  <meta name="author" content="Sean Callan">

  <meta property="og:url" content="http://localhost:4000/blog/sorting-a-table-with-live-view-live-links/">
  <meta property="og:site_name" content="ElixirSchool">
  <meta property="og:title" content="">
  <meta property="og:locale" content="">
  <meta property="og:description" content="">
  <meta property="og:image" content="http://localhost:4000/assets/og_image-fad975b316dea5dc361d199bdfaa076006da49a0a3296f799aa7217b4c8b0cbe.jpg">
  
  

  <link rel="canonical" href="http://localhost:4000/blog/sorting-a-table-with-live-view-live-links/">
  <link rel="apple-touch-icon" sizes="180x180" href="http://localhost:4000/assets/favicons/apple-touch-icon-06ad80501b5734bba0428ca0fc14fcbe45811a144914f7be78cdab3c3ea25458.png">
  <link rel="icon" type="image/png" sizes="32x32" href="http://localhost:4000/assets/favicons/favicon-32x32-6e7b9eca57d29d185a5184e844c1372ce9da0a71f373f89b80ff11f120b01678.png">
  <link rel="icon" type="image/png" sizes="16x16" href="http://localhost:4000/assets/favicons/favicon-16x16-789b56195138252cac40cf7f2425b6fcb4e71c3084abc8525781188781b958d3.png">
  <link rel="manifest" href="http://localhost:4000/manifest.json">
  <link rel="shortcut icon" href="http://localhost:4000/assets/favicons/favicon-8e1fdc2a44d6344b9871b3ecf53a803903891f82a602a3f59c65eda40f2b77b0.ico">
  <link rel="alternate" type="application/rss+xml" title="Elixir School" href="https://elixirschool.com/feed.xml" />
  <meta name="msapplication-config" content="http://localhost:4000/assets/favicons/browserconfig-e66282a6754e6899f9a53c6ebfe120749630242b741deb65f364abc297ccbc96.xml">
  <meta name="theme-color" content="#ffffff">

  
  
  <title>Building a Table Sort UI with Live View's `live_link` &middot; Elixir School</title>
  <!-- CSS -->
  <!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
  <link rel="stylesheet" type="text/css" href="/assets/main-07a5a32c1a26652d2bb0e43b4c7ade37f20599a76cae3c1e871d3af53cff80b2.css">
  <!--[if lte IE 9]><link rel="stylesheet" type="text/css" href="/assets/ie9-0c07c3ea146a3dd5dce4effda97b3718824cab9c30149877c0e445edecfdee60.css"><![endif]-->
  <!--[if lte IE 8]><link rel="stylesheet" type="text/css" href="/assets/ie8-f0c85ce6ad95a6d33929cb969a44f41a5e96ecb22de55f55d0f3c83cfc0012fc.css"><![endif]-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
  <script type="text/javascript">
  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.1.0";
  analytics.load("C0p07Sw9j7mZnycKDCgPOAyqJR5hhyoQ");
  analytics.page()
  }}();
  </script>
  <script type="text/javascript">
    if ("serviceWorker" in navigator) {
      if (!navigator.serviceWorker.controller) {
        navigator.serviceWorker.register("http://localhost:4000/serviceworker.js", {
          scope: "http://localhost:4000"
        })
        .then(reg => console.log("Service worker has been registered for scope: ", reg.scope))
        .catch(error => console.log("Service worker registration has failed: ", error));
      }
    }  
  </script>
</head>

	<body class="is-loading">
    <script type="text/javascript">
    var $theme = localStorage.getItem('theme');
    if ($theme === 'dark') document.body.classList.add("dark");
    </script>
		<!-- Wrapper -->
		<div id="wrapper">
			<!-- Main -->
			<div id="main">
				<div class="inner">
					<!-- Header -->
					<header id="header">
					  <a href="/" class="logo"><strong>Elixir School</strong> Blog</a>
					  <ul class="icons">
  
  <li><iframe src="https://ghbtns.com/github-btn.html?user=elixirschool&repo=elixirschool&type=star&count=true" height="20" title="GitHub Stars" width="93" style="vertical-align: sub;"></iframe></li>
  <li><a target="_blank" rel="noopener" title="RSS" href="https://elixirschool.com/feed.xml" class="icon fa-rss-square"><span class="label">RSS</span></a></li>
  <li><a target="_blank" rel="noopener" title="LinkedIn" href="https://www.linkedin.com/shareArticle?mini=true&url=http://localhost:4000/blog/sorting-a-table-with-live-view-live-links/&title=Building a Table Sort UI with Live View's `live_link`&summary=description&source=http://localhost:4000" class="icon fa-linkedin"><span class="label">Linkedin</span></a></li>
  <li><a target="_blank" rel="noopener" title="Twitter" href="https://twitter.com/intent/tweet?url=http://localhost:4000/blog/sorting-a-table-with-live-view-live-links/&via=elixirschool&text=ElixirSchool: Building a Table Sort UI with Live View's `live_link`&hashtags=learnelixir%2Celixirlang&" class="icon fa-twitter"><span class="label">Twitter</span></a></li>
  <li><a target="_blank" rel="noopener" title="Facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/blog/sorting-a-table-with-live-view-live-links/" class="icon fa-facebook"><span class="label">Facebook</span></a></li>
  <li><a target="_blank" rel="noopener" title="Pinterest" href="https://www.pinterest.com/pin/create/link/?url=http://localhost:4000/blog/sorting-a-table-with-live-view-live-links/&media=http://localhost:4000/assets/og_image-fad975b316dea5dc361d199bdfaa076006da49a0a3296f799aa7217b4c8b0cbe.jpg&description=ElixirSchool: Building a Table Sort UI with Live View's `live_link`" class="icon fa-pinterest"><span class="label">Pinterest</span></a></li>
  <li><a target="_blank" rel="noopener" title="VK" href="https://vk.com/share.php?url=http://localhost:4000/blog/sorting-a-table-with-live-view-live-links/&title=ElixirSchool: Building a Table Sort UI with Live View's `live_link`&description=Check out 'Building a Table Sort UI with Live View's `live_link`' on ElixirSchool" class="icon fa-vk"><span class="label">VK</span></a></li>
  <li><a target="_blank" rel="noopener" title="Email" href="mailto:?to=&subject=ElixirSchool: Building a Table Sort UI with Live View's `live_link`&body=Check out 'Building a Table Sort UI with Live View's `live_link`' on ElixirSchool%0D%0A%0D%0Ahttp://localhost:4000/blog/sorting-a-table-with-live-view-live-links/" class="icon fa-envelope"><span class="label">Email</span></a></li>
  <li><a title="Print" href="javascript:window.print()" class="icon fa-print"><span class="label">Print</span></a></li>
</ul>

					</header>
					

<section id="section-page">
  <header class="main">
    <h1 class="post-title">Building a Table Sort UI with Live View's `live_link`</h1>
    <p><a href="/blog/years/2019/">20 Oct 2019</a> · by 

    <a href="https://thegreatcodeadventure.com" target="_blank" rel="nofollow noopener">Sophie DeBenedetto</a> in <a href="/blog/categories/general/">General</a></p>
  </header>
  <div class="content">
    <p>LiveView makes it easy to solve for some of the most common UI challenges with little to no front-end code. It allows us to save JavaScript for the hard stuff––for complex and sophisticated UI changes. In building out a recent admin-facing view that included a table of student cohorts at the Flatiron School, I found myself reaching for LiveView. In just a few lines of backend code, my sortable table was up and running. Keep reading to see how you can leverage LiveView’s <code class="highlighter-rouge">live_link/2</code> and <code class="highlighter-rouge">handle_params/3</code> to build out such a feature.</p>

<h2 id="the-feature">The Feature</h2>

<p>Our view presents a table of student cohorts that looks like this:</p>

<p><img src="/assets/live-view-table-de7e10060f002103cea071882feaa96a21c4c04777a4173a1f6953ff68340719.png" alt="live view table" /></p>

<p>Users need to be able to sort this table by cohort name, campus, start date or status. We’d also like to ensure that the “sort by” attribute is included in the URL’s query params, so that users can share links to sorted views.</p>

<p>Here’s a look at the behavior we’re going for. Note how the URL changes when we click on a given column heading to sort the table.</p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/-4VRaX1uEhk" frameborder="0" allow="accelerometer; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>

<h2 id="using-live_link2">Using <code class="highlighter-rouge">live_link/2</code></h2>

<p>LiveView’s <a href="https://hexdocs.pm/phoenix_live_view/Phoenix.LiveView.html#module-live-navigation"><code class="highlighter-rouge">live_link/2</code></a> function allows page navigation using the browser’s <a href="https://developer.mozilla.org/en-US/docs/Web/API/History_API">pushState API</a>. This will ensure that that URL will change to include whatever parameters we include in a given <code class="highlighter-rouge">live_link/2</code> call.</p>

<p>One important thing to note before we proceed, however. In order to use the live navigation features, our live view needs to be mounted directly in the router, <em>not</em> rendered from a controller action.</p>

<p>Our router mounts the live view like this:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># lib/course_conductor_web/router.ex</span>

<span class="n">scope</span> <span class="s2">"/"</span><span class="p">,</span> <span class="no">CourseConductorWeb</span> <span class="k">do</span>
  <span class="n">pipe_through</span><span class="p">([</span><span class="ss">:browser</span><span class="p">,</span> <span class="ss">:auth</span><span class="p">])</span>
  <span class="n">live</span> <span class="s2">"/cohorts"</span><span class="p">,</span> <span class="no">CohortsLive</span>
<span class="k">end</span>
</code></pre></div></div>

<p>And we’re ready to get started!</p>

<p>We’ll start by turning the <code class="highlighter-rouge">"Name"</code> table header into a live link.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code># lib/course_conductor_web/templates/cohorts/index.html.leex
<span class="nt">&lt;table&gt;</span>
  <span class="nt">&lt;th&gt;&lt;</span><span class="err">%=</span> <span class="na">live_link</span> <span class="err">"</span><span class="na">Name</span><span class="err">",</span> <span class="na">to:</span> <span class="na">Routes</span><span class="err">.</span><span class="na">live_path</span><span class="err">(@</span><span class="na">socket</span><span class="err">,</span> <span class="na">CourseConductorWeb</span><span class="err">.</span><span class="na">CohortsLive</span><span class="err">,</span> <span class="err">%{</span><span class="na">sort_by:</span> <span class="err">"</span><span class="na">name</span><span class="err">"})</span> <span class="err">%</span><span class="nt">&gt;&lt;/th&gt;</span>
  ...
<span class="nt">&lt;/table&gt;</span>
</code></pre></div></div>

<p>The <code class="highlighter-rouge">live_link/2</code> function generates a live link for HTML5 pushState based navigation <em>without</em> page reloads.</p>

<p>With the help of the the <code class="highlighter-rouge">Routes.live_path</code> helper, we’re generating the following live link: <code class="highlighter-rouge">"/cohorts?sort_by=name"</code>. Since this route belongs to the <code class="highlighter-rouge">CohortsLive</code> live view that we’ve already mounted, <em>and</em> since that live view is defined in our router (as opposed to rendered from a controller action), this means we will invoke our existing live view’s <code class="highlighter-rouge">handle_params/3</code> function <em>without mounting a new LiveView</em>. Pretty cool!</p>

<p>Let’s take a look at how we can implement a <code class="highlighter-rouge">handle_params/3</code> function now.</p>

<h2 id="implementing-handle_params3">Implementing <code class="highlighter-rouge">handle_params/3</code></h2>

<p>The <code class="highlighter-rouge">handle_params/3</code> callback is invoked under two circumstances.</p>
<ul>
  <li>After <code class="highlighter-rouge">mount/2</code> is called (i.e. when the live view first renders)</li>
  <li>When a live navigation event, like a live link click, occurs. This second circumstance only triggers this callback when, as described above, the live view we are linking to is the same live view we are currently on <em>and</em> the LiveView is defined in the router.</li>
</ul>

<p><code class="highlighter-rouge">handle_params/3</code> receives three arguments:</p>
<ul>
  <li>The query parameters</li>
  <li>The requested url</li>
  <li>The socket</li>
</ul>

<p>We can use <code class="highlighter-rouge">handle_params/3</code> to update socket state and therefore trigger a server re-render of the template.</p>

<p>Given that <code class="highlighter-rouge">handle_params/3</code> will be invoked by our live view whenever our <code class="highlighter-rouge">"Name"</code> live link is clicked, we need to implement this function in our live view to match and act on the <code class="highlighter-rouge">sort_by</code> params our live link will send.</p>

<p>Assuming we have the following live view that mounts and renders a list of cohorts:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># lib/course_conductor_web/live/cohorts_live.ex</span>

<span class="k">defmodule</span> <span class="no">CourseConductorWeb</span><span class="o">.</span><span class="no">CohortsLive</span> <span class="k">do</span>
  <span class="kn">use</span> <span class="no">Phoenix</span><span class="o">.</span><span class="no">LiveView</span>

  <span class="k">def</span> <span class="n">render</span><span class="p">(</span><span class="n">assigns</span><span class="p">)</span> <span class="k">do</span>
    <span class="no">Phoenix</span><span class="o">.</span><span class="no">View</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="no">CourseConductorWeb</span><span class="o">.</span><span class="no">CohortView</span><span class="p">,</span> <span class="s2">"index.html"</span><span class="p">,</span> <span class="n">assigns</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="n">mount</span><span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">socket</span><span class="p">)</span> <span class="k">do</span>
    <span class="n">cohorts</span> <span class="o">=</span> <span class="no">Cohort</span><span class="o">.</span><span class="n">all_cohorts</span><span class="p">()</span>
    <span class="p">{</span><span class="ss">:ok</span><span class="p">,</span> <span class="n">assign</span><span class="p">(</span><span class="n">socket</span><span class="p">,</span> <span class="ss">cohorts:</span> <span class="n">cohorts</span><span class="p">)}</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>We’ll implement our <code class="highlighter-rouge">handle_params/3</code> function like this:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#  lib/course_conductor_web/live/cohorts_live.ex</span>

<span class="k">def</span> <span class="n">handle_params</span><span class="p">(%{</span><span class="s2">"sort_by"</span> <span class="o">=&gt;</span> <span class="n">sort_by</span><span class="p">},</span> <span class="n">_uri</span><span class="p">,</span> <span class="n">socket</span><span class="p">)</span> <span class="k">do</span>
  <span class="k">case</span> <span class="n">sort_by</span> <span class="k">do</span>
    <span class="n">sort_by</span>
    <span class="ow">when</span> <span class="n">sort_by</span> <span class="ow">in</span> <span class="sx">~w(name)</span> <span class="o">-&gt;</span>
      <span class="p">{</span><span class="ss">:noreply</span><span class="p">,</span> <span class="n">assign</span><span class="p">(</span><span class="n">socket</span><span class="p">,</span> <span class="ss">cohorts:</span> <span class="n">sort_cohorts</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">assigns</span><span class="o">.</span><span class="n">cohorts</span><span class="p">,</span> <span class="n">sort_by</span><span class="p">))}</span>

    <span class="n">_</span> <span class="o">-&gt;</span>
      <span class="p">{</span><span class="ss">:noreply</span><span class="p">,</span> <span class="n">socket</span><span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>


<span class="k">def</span> <span class="n">handle_params</span><span class="p">(</span><span class="n">_params</span><span class="p">,</span> <span class="n">_uri</span><span class="p">,</span> <span class="n">socket</span><span class="p">)</span> <span class="k">do</span>
  <span class="p">{</span><span class="ss">:noreply</span><span class="p">,</span> <span class="n">socket</span><span class="p">}</span>
<span class="k">end</span>

<span class="k">def</span> <span class="n">sort_cohorts</span><span class="p">(</span><span class="n">cohort</span><span class="p">,</span> <span class="s2">"name"</span><span class="p">)</span> <span class="k">do</span>
  <span class="no">Enum</span><span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="n">cohorts</span><span class="p">,</span> <span class="k">fn</span> <span class="n">cohort</span> <span class="o">-&gt;</span> <span class="n">cohort</span><span class="o">.</span><span class="n">name</span> <span class="k">end</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Note that we’ve included a “catch-all” version of the <code class="highlighter-rouge">handle_params/3</code> function that will be invoked if someone navigates to <code class="highlighter-rouge">/cohorts</code> and includes query params that do not match the <code class="highlighter-rouge">"sort_by"</code> param that we care about. If our live view receives such a request, it will not update state.</p>

<p>Now, when a user clicks the <code class="highlighter-rouge">"Name"</code> live link, two things will happen:</p>

<ul>
  <li>The browser’s pushState API will be leveraged to change the URL to <code class="highlighter-rouge">/cohorts?sort_by=name</code></li>
  <li>Our already-mounted live view’s <code class="highlighter-rouge">handle_params/3</code> function will be invoked with the params <code class="highlighter-rouge">%{"sort_by" =&gt; "name"}</code></li>
</ul>

<p>Our <code class="highlighter-rouge">handle_params/3</code> function will then sort the cohorts stored <code class="highlighter-rouge">socket.assigns</code> by cohort name and update the socket state with the sorted list. The template will therefore re-render with the sorted list.</p>

<p>Since <code class="highlighter-rouge">handle_params/3</code> is <em>also</em> called after <code class="highlighter-rouge">mount/2</code>, we have therefore allowed a user to navigate directly to <code class="highlighter-rouge">/cohorts?sort_by=name</code> via their browser and see the live view render with a table of cohorts already sorted by name. And just like that we’ve enabled users to share links to sorted table views with zero additional lines of code!</p>

<h2 id="more-sorting">More Sorting!</h2>

<p>Now that our “sort by name” feature is up and running, let’s add the remaining live links to allow users to sort by the other attributes we listed earlier: campus, start date and status.</p>

<p>First, we’ll make each of these table headers into a live link:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;table&gt;</span>
  <span class="nt">&lt;th&gt;&lt;</span><span class="err">%=</span> <span class="na">live_link</span> <span class="err">"</span><span class="na">Name</span><span class="err">",</span> <span class="na">to:</span> <span class="na">Routes</span><span class="err">.</span><span class="na">live_path</span><span class="err">(@</span><span class="na">socket</span><span class="err">,</span> <span class="na">CourseConductorWeb</span><span class="err">.</span><span class="na">CohortsLive</span><span class="err">,</span> <span class="err">%{</span><span class="na">sort_by:</span> <span class="err">"</span><span class="na">name</span><span class="err">"})</span> <span class="err">%</span><span class="nt">&gt;&lt;/th&gt;</span>
  <span class="nt">&lt;th&gt;&lt;</span><span class="err">%=</span> <span class="na">live_link</span> <span class="err">"</span><span class="na">Campus</span><span class="err">",</span> <span class="na">to:</span> <span class="na">Routes</span><span class="err">.</span><span class="na">live_path</span><span class="err">(@</span><span class="na">socket</span><span class="err">,</span> <span class="na">CourseConductorWeb</span><span class="err">.</span><span class="na">CohortsLive</span><span class="err">,</span> <span class="err">%{</span><span class="na">sort_by:</span> <span class="err">"</span><span class="na">campus</span><span class="err">"})</span> <span class="err">%</span><span class="nt">&gt;&lt;/th&gt;</span>
  <span class="nt">&lt;th&gt;&lt;</span><span class="err">%=</span> <span class="na">live_link</span> <span class="err">"</span><span class="na">Start</span> <span class="na">Date</span><span class="err">",</span> <span class="na">to:</span> <span class="na">Routes</span><span class="err">.</span><span class="na">live_path</span><span class="err">(@</span><span class="na">socket</span><span class="err">,</span> <span class="na">CourseConductorWeb</span><span class="err">.</span><span class="na">CohortsLive</span><span class="err">,</span> <span class="err">%{</span><span class="na">sort_by:</span> <span class="err">"</span><span class="na">start_date</span><span class="err">"})</span> <span class="err">%</span><span class="nt">&gt;&lt;/th&gt;</span>
  <span class="nt">&lt;th&gt;&lt;</span><span class="err">%=</span> <span class="na">live_link</span> <span class="err">"</span><span class="na">Status</span><span class="err">",</span> <span class="na">to:</span> <span class="na">Routes</span><span class="err">.</span><span class="na">live_path</span><span class="err">(@</span><span class="na">socket</span><span class="err">,</span> <span class="na">CourseConductorWeb</span><span class="err">.</span><span class="na">CohortsLive</span><span class="err">,</span> <span class="err">%{</span><span class="na">sort_by:</span> <span class="err">"</span><span class="na">status</span><span class="err">"})</span> <span class="err">%</span><span class="nt">&gt;&lt;/th&gt;</span>
<span class="nt">&lt;/table&gt;</span>
</code></pre></div></div>

<p>And we’ll build out our <code class="highlighter-rouge">handle_params/3</code> function to operate on params describing a sort by any of these attributes:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="n">handle_params</span><span class="p">(%{</span><span class="s2">"sort_by"</span> <span class="o">=&gt;</span> <span class="n">sort_by</span><span class="p">},</span> <span class="n">_uri</span><span class="p">,</span> <span class="n">socket</span><span class="p">)</span> <span class="k">do</span>
  <span class="k">case</span> <span class="n">sort_by</span> <span class="k">do</span>
    <span class="n">sort_by</span>
    <span class="ow">when</span> <span class="n">sort_by</span> <span class="ow">in</span> <span class="sx">~w(name course_offering campus start_date end_date lms_cohort_status)</span> <span class="o">-&gt;</span>
      <span class="p">{</span><span class="ss">:noreply</span><span class="p">,</span> <span class="n">assign</span><span class="p">(</span><span class="n">socket</span><span class="p">,</span> <span class="ss">cohorts:</span> <span class="n">sort_cohorts</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">assigns</span><span class="o">.</span><span class="n">cohorts</span><span class="p">,</span> <span class="n">sort_by</span><span class="p">))}</span>

    <span class="n">_</span> <span class="o">-&gt;</span>
      <span class="p">{</span><span class="ss">:noreply</span><span class="p">,</span> <span class="n">socket</span><span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Here, we’ve added a check to see if the <code class="highlighter-rouge">sort_by</code> attribute is included in our list of sortable attributes.</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="ow">when</span> <span class="n">sort_by</span> <span class="ow">in</span> <span class="sx">~w(name course_offering campus start_date end_date lms_cohort_status)</span>
</code></pre></div></div>

<p>If so, we will proceed to sort cohorts. If not, i.e. if a user pointed their browser to <code class="highlighter-rouge">/cohorts?sort_by=not_a_thing_we_support</code>, then we will ignore the <code class="highlighter-rouge">sort_by</code> value and refrain from updating socket state.</p>

<p>Next up, we’ll add the necessary version for the <code class="highlighter-rouge">sort_cohorts/2</code> function that will pattern match against our new “sort by” options:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="n">sort_cohorts</span><span class="p">(</span><span class="n">cohorts</span><span class="p">,</span> <span class="s2">"campus"</span><span class="p">)</span> <span class="k">do</span>
  <span class="no">Enum</span><span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="n">cohorts</span><span class="p">,</span> <span class="k">fn</span> <span class="n">cohort</span> <span class="o">-&gt;</span> <span class="n">cohort</span><span class="o">.</span><span class="n">campus</span><span class="o">.</span><span class="n">name</span> <span class="k">end</span><span class="p">)</span>
<span class="k">end</span>

<span class="k">def</span> <span class="n">sort_cohorts</span><span class="p">(</span><span class="n">cohorts</span><span class="p">,</span> <span class="s2">"start_date"</span><span class="p">)</span> <span class="k">do</span>
  <span class="no">Enum</span><span class="o">.</span><span class="n">sort_by</span><span class="p">(</span>
    <span class="n">cohorts</span><span class="p">,</span>
    <span class="k">fn</span> <span class="n">cohort</span> <span class="o">-&gt;</span> <span class="p">{</span><span class="n">cohort</span><span class="o">.</span><span class="n">start_date</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="n">cohort</span><span class="o">.</span><span class="n">start_date</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="n">cohort</span><span class="o">.</span><span class="n">start_date</span><span class="o">.</span><span class="n">day</span><span class="p">}</span> <span class="k">end</span><span class="p">,</span>
    <span class="o">&amp;&gt;=/</span><span class="mi">2</span>
  <span class="p">)</span>
<span class="k">end</span>

<span class="k">def</span> <span class="n">sort_cohorts</span><span class="p">(</span><span class="n">cohorts</span><span class="p">,</span> <span class="s2">"status"</span><span class="p">)</span> <span class="k">do</span>
  <span class="no">Enum</span><span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="n">cohorts</span><span class="p">,</span> <span class="k">fn</span> <span class="n">cohort</span> <span class="o">-&gt;</span>
    <span class="n">cohort</span><span class="o">.</span><span class="n">status</span>
  <span class="k">end</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div>

<p>And that’s it!</p>

<h2 id="conclusion">Conclusion</h2>

<p>Once again LiveView has made it easy to build seamless real-time UIs. So, while LiveView doesn’t mean you’ll never have to write JavaScript again, it <em>does</em> mean that we don’t need to leverage JavaScript for common, everyday challenges like sorting data in a UI. Instead of writing complex vanilla JS, or reaching for a powerful front-end framework, we were able to create a sophisticated real-time UI with mostly back-end code, and back it all with the power of fault-tolerant Elixir processes.</p>

    
    <div class="tags">
      <h4 class="title">Article tags</h4>
      
        <span class="tag"><a href="/blog/tags/live view/">live view</a></span>
      
      </div>
    </p>
    

    <blockquote class="edit-lesson">
      Caught a mistake or want to contribute to the article?
      <a href="https://github.com/elixirschool/elixirschool/edit/master/_posts/2019-10-20-sorting-a-table-with-live-view-live-links.md" target="_blank" rel="noopener">
        Edit this page on GitHub!
      </a>
    </blockquote>
  </div>
</section>
<section class="section-prevnext">
  <div class="row">
    <div class="6u 12u$(small)">
      
        <h4 class="title is-7 has-text-grey-light">Previous article</h4>
        <a class="button special fit" href="http://localhost:4000/blog/releasing-an-umbrella-app-with-docker-and-mix-release/" title="Releasing an Umbrella App with Docker, Mix Release and Config" rel="prev">&laquo; Releasing an Umbrella App with Docker, Mix Rele...</a>
      
    </div>
    <div class="6u 12u$(small)">
      
        <h4>Next article</h4>
        <a class="button special fit" href="http://localhost:4000/blog/building-admissions/" title="Building Elixir School's Admissions portal" rel="next">Building Elixir School's Admissions portal &raquo;</a>
      
    </div>
  </div>
</section>

<section>

    
  
    <div class="row profile">
  <div class="1u 2u(medium) 12u$(small)"><img src="https://github.com/SophieDeBenedetto.png" alt="" style="max-width: 60px;"></div>
  <div class="11u 10u(medium) 12u$(small)">
    <h2>
    
      <a href="https://github.com/SophieDeBenedetto">Sophie DeBenedetto</a>
    
    </h2>
    <p class="content">Sophie is an engineer and teacher at The Flatiron School. She loves teaching and learning and finding the Elixir School community felt like the perfect fit!</p>
    <ul class="icons">
      
      <li><a href="https://thegreatcodeadventure.com" class="icon fa-globe"><span class="label">Homepage</span></a></li>
      
      
      <li><a href="https://twitter.com/sm_debenedetto" class="icon fa-twitter"><span class="label">Twitter</span></a></li>
      
      <li><a href="https://github.com/SophieDeBenedetto" class="icon fa-github"><span class="label">Github</span></a></li>
    </ul>
  </div>
</div>

  
</section>

				</div>
			</div>
			<!-- Sidebar -->
  <div id="sidebar">
    <p class="toggle-theme-wrapper"><a rel="noopener" href="#toggle-theme" class="toggle-theme icon fas fa-circle-o" alt="Toggle Theme" title="Toggle Theme"></a></p>

    <div class="inner">
      

      
<!-- Menu -->
<nav id="menu">
  <span class="stack-info otp-version">Elixir 1.10.1 - Erlang/OTP 22.0 [erts-10.5.3]</span>
  <header class="major">
    <h2></h2>
    <p>The premier destination for learning and mastering Elixir</p>
  </header>
  <ul>
    <li>
      <a href="/" class=" up ">Home</a>
    </li>
  
    
    
    
    
    
  
    
    
    
    
    
      
        
        <li>
          <span class="opener up">Basics</span>
          <ul>
        
            <li>
              
              <a href="/en/lessons/basics/basics/">1. Basics</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/basics/collections/">2. Collections</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/basics/enum/">3. Enum</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/basics/pattern-matching/">4. Pattern Matching</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/basics/control-structures/">5. Control Structures</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/basics/functions/">6. Functions</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/basics/pipe-operator/">7. Pipe Operator</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/basics/modules/">8. Modules</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/basics/mix/">9. Mix</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/basics/sigils/">10. Sigils</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/basics/documentation/">11. Documentation</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/basics/testing/">12. Testing</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/basics/comprehensions/">13. Comprehensions</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/basics/strings/">14. Strings</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/basics/date-time/">15. Date and Time</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/basics/mix-tasks/">16. Custom Mix Tasks</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/basics/iex-helpers/">17. IEx Helpers</a>
              
            </li>
        
          </ul>
        </li>
        
      
    
  
    
    
    
    
    
      
        
        <li>
          <span class="opener up">Advanced</span>
          <ul>
        
            <li>
              
              <a href="/en/lessons/advanced/erlang/">1. Erlang Interoperability</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/advanced/error-handling/">2. Error Handling</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/advanced/escripts/">3. Executables</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/advanced/concurrency/">4. Concurrency</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/advanced/otp-concurrency/">5. OTP Concurrency</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/advanced/otp-supervisors/">6. OTP Supervisors</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/advanced/otp-distribution/">7. OTP Distribution</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/advanced/metaprogramming/">8. Metaprogramming</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/advanced/umbrella-projects/">9. Umbrella Projects</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/advanced/typespec/">10. Specifications and types</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/advanced/behaviours/">11. Behaviours</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/advanced/gen-stage/">12. GenStage</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/advanced/protocols/">13. Protocols</a>
              
            </li>
        
          </ul>
        </li>
        
      
    
  
    
    
    
    
    
      
        
        <li>
          <span class="opener up">Ecto</span>
          <ul>
        
            <li>
              
              <a href="/en/lessons/ecto/basics/">1. Basics</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/ecto/changesets/">2. Changesets</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/ecto/associations/">3. Associations</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/ecto/querying/">4. Querying</a>
              
            </li>
        
          </ul>
        </li>
        
      
    
  
    
    
    
    
    
      
        
        <li>
          <span class="opener up">Specifics</span>
          <ul>
        
            <li>
              
              <a href="/en/lessons/specifics/plug/">1. Plug</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/specifics/eex/">2. Embedded Elixir (EEx)</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/specifics/ets/">3. Erlang Term Storage (ETS)</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/specifics/mnesia/">4. Mnesia</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/specifics/debugging/">5. Debugging</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/specifics/nerves/">6. Nerves</a>
              
            </li>
        
          </ul>
        </li>
        
      
    
  
    
    
    
    
    
      
        
        <li>
          <span class="opener up">Libraries</span>
          <ul>
        
            <li>
              
              <a href="/en/lessons/libraries/guardian/">1. Guardian (Basics)</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/libraries/poolboy/">2. Poolboy</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/libraries/benchee/">3. Benchee</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/libraries/bypass/">4. Bypass</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/libraries/distillery/">5. Distillery (Basics)</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/en/lessons/libraries/stream-data/">6. StreamData</a>
              
            </li>
        
          </ul>
        </li>
        
      
    
  
    <li>
      <a href="/blog/" class=" up active">Blog</a>
    </li>
    
    <li>
      <a href="/contributors/" class=" up ">Contributors</a>
    </li>
  </ul>
</nav>

      <!-- Footer -->
      <footer id="footer">
        <p class="copyright">&copy; 2021 <a target="_blank" rel="noopener" href="https://github.com/doomspork">Sean Callan</a> All rights reserved.</p>
      </footer>
    </div>
  </div>

		</div>
		<!-- Scripts -->

    <script async="" src="/assets/main-f8c201d2721dcb6d1d4f6acb0ebd2b2c192757ed29271f519513e4417e347611.js" type="text/javascript"></script>
		<!--[if lte IE 8]><script async="" src="/assets/ie/respond.min-8306093ccce666c01dab405fac0d16596a1d1cf38aa0ba919d4831261662cdbb.js" type="text/javascript"></script><script src="assets/js/ie/respond.min.js"></script><![endif]-->
	</body>
</html>
