<!DOCTYPE HTML>



<html lang="vi">
	<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta name="description" content="Giáo trình cho ngôn ngữ lập trình Elixir">
  <meta name="author" content="Sean Callan">

  <meta property="og:url" content="http://localhost:4000/vi/lessons/specifics/mnesia/">
  <meta property="og:site_name" content="ElixirSchool">
  <meta property="og:title" content="Elixir School">
  <meta property="og:locale" content="vi">
  <meta property="og:description" content="Giáo trình cho ngôn ngữ lập trình Elixir">
  <meta property="og:image" content="http://localhost:4000/assets/og_image-fad975b316dea5dc361d199bdfaa076006da49a0a3296f799aa7217b4c8b0cbe.jpg">
  
  
    
    
    
    
      <link rel="alternate" hreflang="en" href="/en/lessons/specifics/mnesia/" />
      <link rel="alternate" hreflang="x-default" href="/en/lessons/specifics/mnesia/" />
    
  
    
    
    
    
      <link rel="alternate" hreflang="es" href="/es/lessons/specifics/mnesia/" />
    
  
    
    
    
    
      <link rel="alternate" hreflang="el" href="/gr/lessons/specifics/mnesia/" />
    
  
    
    
    
    
      <link rel="alternate" hreflang="id" href="/id/lessons/specifics/mnesia/" />
    
  
    
    
    
    
      <link rel="alternate" hreflang="ko" href="/ko/lessons/specifics/mnesia/" />
    
  
    
    
    
    
      <link rel="alternate" hreflang="pl" href="/pl/lessons/specifics/mnesia/" />
    
  
    
    
    
    
      <link rel="alternate" hreflang="pt" href="/pt/lessons/specifics/mnesia/" />
    
  
    
    
    
    
      <link rel="alternate" hreflang="ru" href="/ru/lessons/specifics/mnesia/" />
    
  
    
    
    
    
      <link rel="alternate" hreflang="th" href="/th/lessons/specifics/mnesia/" />
    
  
    
    
    
    
      <link rel="alternate" hreflang="vi" href="/vi/lessons/specifics/mnesia/" />
    
  
    
    
    
    
      <link rel="alternate" hreflang="zh-hans" href="/zh-hans/lessons/specifics/mnesia/" />
    
  
    
    
    
    
      <link rel="alternate" hreflang="zh-hant" href="/zh-hant/lessons/specifics/mnesia/" />
    
  

  <link rel="canonical" href="http://localhost:4000/vi/lessons/specifics/mnesia/">
  <link rel="apple-touch-icon" sizes="180x180" href="http://localhost:4000/assets/favicons/apple-touch-icon-06ad80501b5734bba0428ca0fc14fcbe45811a144914f7be78cdab3c3ea25458.png">
  <link rel="icon" type="image/png" sizes="32x32" href="http://localhost:4000/assets/favicons/favicon-32x32-6e7b9eca57d29d185a5184e844c1372ce9da0a71f373f89b80ff11f120b01678.png">
  <link rel="icon" type="image/png" sizes="16x16" href="http://localhost:4000/assets/favicons/favicon-16x16-789b56195138252cac40cf7f2425b6fcb4e71c3084abc8525781188781b958d3.png">
  <link rel="manifest" href="http://localhost:4000/manifest.json">
  <link rel="shortcut icon" href="http://localhost:4000/assets/favicons/favicon-8e1fdc2a44d6344b9871b3ecf53a803903891f82a602a3f59c65eda40f2b77b0.ico">
  <link rel="alternate" type="application/rss+xml" title="Elixir School" href="https://elixirschool.com/feed.xml" />
  <meta name="msapplication-config" content="http://localhost:4000/assets/favicons/browserconfig-e66282a6754e6899f9a53c6ebfe120749630242b741deb65f364abc297ccbc96.xml">
  <meta name="theme-color" content="#ffffff">

  
  
  <title>Mnesia &middot; Elixir School</title>
  <!-- CSS -->
  <!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
  <link rel="stylesheet" type="text/css" href="/assets/main-07a5a32c1a26652d2bb0e43b4c7ade37f20599a76cae3c1e871d3af53cff80b2.css">
  <!--[if lte IE 9]><link rel="stylesheet" type="text/css" href="/assets/ie9-0c07c3ea146a3dd5dce4effda97b3718824cab9c30149877c0e445edecfdee60.css"><![endif]-->
  <!--[if lte IE 8]><link rel="stylesheet" type="text/css" href="/assets/ie8-f0c85ce6ad95a6d33929cb969a44f41a5e96ecb22de55f55d0f3c83cfc0012fc.css"><![endif]-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
  <script type="text/javascript">
  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.1.0";
  analytics.load("C0p07Sw9j7mZnycKDCgPOAyqJR5hhyoQ");
  analytics.page()
  }}();
  </script>
  <script type="text/javascript">
    if ("serviceWorker" in navigator) {
      if (!navigator.serviceWorker.controller) {
        navigator.serviceWorker.register("http://localhost:4000/serviceworker.js", {
          scope: "http://localhost:4000"
        })
        .then(reg => console.log("Service worker has been registered for scope: ", reg.scope))
        .catch(error => console.log("Service worker registration has failed: ", error));
      }
    }  
  </script>
</head>

	<body class="is-loading">
    <script type="text/javascript">
    var $theme = localStorage.getItem('theme');
    if ($theme === 'dark') document.body.classList.add("dark");
    </script>
		<!-- Wrapper -->
		<div id="wrapper">
			<!-- Main -->
			<div id="main">
				<div class="inner">
					<!-- Header -->
					<header id="header">
					  <a href="/vi/" class="logo"><strong>Elixir School</strong></a>
					  <ul class="icons">
  
  <li><iframe src="https://ghbtns.com/github-btn.html?user=elixirschool&repo=elixirschool&type=star&count=true" height="20" title="GitHub Stars" width="93" style="vertical-align: sub;"></iframe></li>
  <li><a target="_blank" rel="noopener" title="RSS" href="https://elixirschool.com/feed.xml" class="icon fa-rss-square"><span class="label">RSS</span></a></li>
  <li><a target="_blank" rel="noopener" title="LinkedIn" href="https://www.linkedin.com/shareArticle?mini=true&url=http://localhost:4000/vi/lessons/specifics/mnesia/&title=Mnesia&summary=description&source=http://localhost:4000" class="icon fa-linkedin"><span class="label">Linkedin</span></a></li>
  <li><a target="_blank" rel="noopener" title="Twitter" href="https://twitter.com/intent/tweet?url=http://localhost:4000/vi/lessons/specifics/mnesia/&via=elixirschool&text=ElixirSchool: Mnesia&hashtags=learnelixir%2Celixirlang&" class="icon fa-twitter"><span class="label">Twitter</span></a></li>
  <li><a target="_blank" rel="noopener" title="Facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/vi/lessons/specifics/mnesia/" class="icon fa-facebook"><span class="label">Facebook</span></a></li>
  <li><a target="_blank" rel="noopener" title="Pinterest" href="https://www.pinterest.com/pin/create/link/?url=http://localhost:4000/vi/lessons/specifics/mnesia/&media=http://localhost:4000/assets/og_image-fad975b316dea5dc361d199bdfaa076006da49a0a3296f799aa7217b4c8b0cbe.jpg&description=ElixirSchool: Mnesia" class="icon fa-pinterest"><span class="label">Pinterest</span></a></li>
  <li><a target="_blank" rel="noopener" title="VK" href="https://vk.com/share.php?url=http://localhost:4000/vi/lessons/specifics/mnesia/&title=ElixirSchool: Mnesia&description=Check out 'Mnesia' on ElixirSchool" class="icon fa-vk"><span class="label">VK</span></a></li>
  <li><a target="_blank" rel="noopener" title="Email" href="mailto:?to=&subject=ElixirSchool: Mnesia&body=Check out 'Mnesia' on ElixirSchool%0D%0A%0D%0Ahttp://localhost:4000/vi/lessons/specifics/mnesia/" class="icon fa-envelope"><span class="label">Email</span></a></li>
  <li><a title="Print" href="javascript:window.print()" class="icon fa-print"><span class="label">Print</span></a></li>
</ul>

					</header>
					<section id="section-page" class="ltr">
  <header class="main">
    
    <h1 class="page-title">
  <span class="version-difference-indicator version-difference-major"></span>
  Mnesia
</h1>
<div class="version-info version-info-major">
  <span>
    
      Some contents of this translation may be outdated.<br/>
    

    Several major changes were applied to the original lesson since the last update.
  </span>
</div>

    
  </header>
  <div class="content">
    <p>Mnesia là một hệ thống nặng kí trong việc quản trị cơ sở dữ liệu thời gian thực.</p>

<h2>Mục lục</h2>
<div id="toc"></div>

<h2 id="tổng-quan">Tổng quan</h2>

<p>Mnesia là hệ quản trị cơ sở dữ liệu (DBMS) được lấy từ Erlang Runtime System và có thể sử dụng thuần thục trong Elixir. Mnesia là <em>relational and object hybrid data model</em> được phát triển để phù hợp với các ứng dụng phân tán dù lớn hay nhỏ.</p>

<h2 id="khi-nào-thì-sử-dụng">Khi nào thì sử dụng</h2>

<p>Lựa chọn việc sử dụng một công nghệ nào thường khá là rối rắm. Nếu bạn có thể trả lời ‘Yes’ cho bất kì câu hỏi sau, thì đó là tín hiệu tốt cho việc sử dụng Mnesia mà không phải là ETS hay DETS.</p>

<ul>
  <li>Tôi có cần chuyển về các transactions cũ không?</li>
  <li>Liệu tôi có muốn dễ dàng trong việc sử dụng cú pháp cho đọc và ghi?</li>
  <li>Tôi có nên lưu trữ dữ liệu ở nhiều nodes, thay vì một?</li>
  <li>Tôi có cần lựa chọn nơi nào để lưu trữ thông tin (RAM or disk)?</li>
</ul>

<h2 id="schema">Schema</h2>

<p>Bởi vì Mnesia là một phần của Erlang, chứ không phải từ Elixir, chúng ta cần truy suất nó với cú pháp hai chấm (See Lesson: <a href="../../advanced/erlang/">Erlang Interoperability</a>):</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">iex</span><span class="o">&gt;</span> <span class="ss">:mnesia</span><span class="o">.</span><span class="n">create_schema</span><span class="p">([</span><span class="n">node</span><span class="p">()])</span>

<span class="c1"># or if you prefer the Elixir feel...</span>

<span class="n">iex</span><span class="o">&gt;</span> <span class="n">alias</span> <span class="ss">:mnesia</span><span class="p">,</span> <span class="ss">as:</span> <span class="no">Mnesia</span>
<span class="n">iex</span><span class="o">&gt;</span> <span class="no">Mnesia</span><span class="o">.</span><span class="n">create_schema</span><span class="p">([</span><span class="n">node</span><span class="p">()])</span>
</code></pre></div></div>

<p>Với ví dụ này, chúng ta sẽ chọn hướng tiếp cận sau khi làm việc với Mnesia API. <code class="highlighter-rouge">Mnesia.create_schema/1</code> khởi tạo một schema mới và rỗng sau đó truyền tới Node List. Trong trường hợp này, chúng ta truyền những node liên quan trong IEx session của ta:</p>

<h2 id="nodes">Nodes</h2>

<p>Sau khi chạy <code class="highlighter-rouge">Mnesia.create_schema([node()])</code> câu lệnh thông qua IEx, bạn có thể thấy thư mục tên là <strong>Mnesia.nonode@nohost</strong> hoặc tương tự trong thư mục hiện hành của bạn. Bạn có thể thắc mắc tại sao ý nghĩa của <strong>nonode@nohost</strong> vì chúng ta chưa gặp nó trước đây. Hãy cùng xem nào.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>iex <span class="nt">--help</span>
Usage: iex <span class="o">[</span>options] <span class="o">[</span>.exs file] <span class="o">[</span>data]

  <span class="nt">-v</span>                Xuất ra phiên bản
  <span class="nt">-e</span> <span class="s2">"command"</span>      Thực thi cậu lệnh được đưa <span class="o">(</span><span class="k">*</span><span class="o">)</span>
  <span class="nt">-r</span> <span class="s2">"file"</span>         Yêu cầu files/pattern đưa vào <span class="o">(</span><span class="k">*</span><span class="o">)</span>
  <span class="nt">-S</span> <span class="s2">"script"</span>       Tìm và thực thi script đưa vào
  <span class="nt">-pr</span> <span class="s2">"file"</span>        Yêu cầu files/patterns đưa vào ở chế động song song<span class="o">(</span><span class="k">*</span><span class="o">)</span>
  <span class="nt">-pa</span> <span class="s2">"path"</span>        Chèn trước đường dẫn vào Erlang code path <span class="o">(</span><span class="k">*</span><span class="o">)</span>
  <span class="nt">-pz</span> <span class="s2">"path"</span>        Chèn sau đường dẫn vào Erlang code path <span class="o">(</span><span class="k">*</span><span class="o">)</span>
  <span class="nt">--app</span> <span class="s2">"app"</span>       Chạy với app được đưa vào và các phụ thuộc của nó <span class="o">(</span><span class="k">*</span><span class="o">)</span>
  <span class="nt">--erl</span> <span class="s2">"switches"</span>  Chuyển đổi sẽ được truyền xuống Erlang <span class="o">(</span><span class="k">*</span><span class="o">)</span>
  <span class="nt">--name</span> <span class="s2">"name"</span>     Tạo và gán tên cho một node phân tán
  <span class="nt">--sname</span> <span class="s2">"name"</span>    Tạo vào gán tên vắn tắt cho một node phân tán
  <span class="nt">--cookie</span> <span class="s2">"cookie"</span> Gán cookie cho một node phân tán
  <span class="nt">--hidden</span>          Tạo một node ẩn
  <span class="nt">--werl</span>            Sử dụng giao diện Erlang Window <span class="o">(</span>chỉ cho Window<span class="o">)</span>
  <span class="nt">--detached</span>        Chạy Erlang VM và tách biệt nó với console
  <span class="nt">--remsh</span> <span class="s2">"name"</span>    Kết nối tới node thông qua remote shell
  <span class="nt">--dot-iex</span> <span class="s2">"path"</span>  Ghi đè mặc định cho .iex.exs file và thay vào đó sử đường dẫn<span class="p">;</span>
                    đường dẫn này có thể rỗng, khi đó không có file nào được load

<span class="k">**</span> Tham số với dấu <span class="o">(</span><span class="k">*</span><span class="o">)</span> có thể thêm vào nhiều
<span class="k">**</span> Tham số theo sau .exs file hoặc <span class="nt">--</span> được đưa xuống code thực thi
<span class="k">**</span> Tham số có thể truyền xuống VM thông qua ELIXIR_ERL_OPTIONS hoặc <span class="nt">--erl</span>
</code></pre></div></div>

<p>Khi truyền tham số <code class="highlighter-rouge">--help</code> xuống IEx từ dòng lệnh chúng ta được xem tất cả các tham số. Chúng ta có tham số <code class="highlighter-rouge">--name</code> và <code class="highlighter-rouge">--sname</code> được gán thêm thông tin cho nodes. Node chỉ đơn giản là một Erlang Virtual Machine nơi xử lý các giao tiếp, garbage collection, process scheduling, memory và nhiều cái khác nữa. Node mặc định được đánh tên <strong>nonode@nohost</strong></p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>iex <span class="nt">--name</span> learner@elixirschool.com

Erlang/OTP 22.0 <span class="o">[</span>erts-10.5.3] <span class="o">[</span><span class="nb">source</span><span class="o">]</span> <span class="o">[</span>64-bit] <span class="o">[</span>smp:4:4] <span class="o">[</span>async-threads:10] <span class="o">[</span>hipe] <span class="o">[</span>kernel-poll:false] <span class="o">[</span>dtrace]

Interactive Elixir <span class="o">(</span>1.10.1<span class="o">)</span> - press Ctrl+C to <span class="nb">exit</span> <span class="o">(</span><span class="nb">type </span>h<span class="o">()</span> ENTER <span class="k">for </span><span class="nb">help</span><span class="o">)</span>
iex<span class="o">(</span>learner@elixirschool.com<span class="o">)&gt;</span> Node.self
:<span class="s2">"learner@elixirschool.com"</span>
</code></pre></div></div>

<p>Như bạn thấy, node mà chúng ta chạy là một atom gọi là <code class="highlighter-rouge">:"learned@elixirschool.com"</code>. Nếu bạn chạy <code class="highlighter-rouge">Mnesia.create_schema([node()])</code> một lần nữa, chúng ta sẽ thấy nó tạo một thư mục khác tên là <strong>Mnesia.learner@elixirschool.com</strong>. Mục đích của việc này khá là đơn giản. Node trong Erlang được sử dụng để kết nối với những nodes khác để share (phân tán) thông tin và tài nguyên. Điều này không hạn chế phải là cùng một máy và có thể giao tiếp qua LAN, internet …</p>

<h2 id="chạy-mnesia">Chạy Mnesia</h2>

<p>Bây giờ chúng ta đã có kiến thức căn bản về cách thiết lập database, chúng ta đã sẵn sằng để chạy Mnesia DBMS với câu lệnh <code class="highlighter-rouge">Mnesia.start/0</code>.</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">iex</span><span class="o">&gt;</span> <span class="n">alias</span> <span class="ss">:mnesia</span><span class="p">,</span> <span class="ss">as:</span> <span class="no">Mnesia</span>
<span class="n">iex</span><span class="o">&gt;</span> <span class="no">Mnesia</span><span class="o">.</span><span class="n">create_schema</span><span class="p">([</span><span class="n">node</span><span class="p">()])</span>
<span class="ss">:ok</span>
<span class="n">iex</span><span class="o">&gt;</span> <span class="no">Mnesia</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="ss">:ok</span>
</code></pre></div></div>

<p>Chú ý rằng khi chạy hệ thống phân tán với hai hay nhiều nodes tham gia vào, <code class="highlighter-rouge">Mnesia.start/1</code> phải được thực thi ở tất cả các nodes.</p>

<h2 id="tạo-bảng">Tạo bảng</h2>

<p><code class="highlighter-rouge">Mnesia.create_table/2</code> được sử dụng để tạo trong database của chúng ta. Ở dưới chúng ta tạo bảng với tên <code class="highlighter-rouge">Person</code> và truyền danh sách khoá cái mà định nghĩa schema của bảng.</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">iex</span><span class="o">&gt;</span> <span class="no">Mnesia</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="no">Person</span><span class="p">,</span> <span class="p">[</span><span class="ss">attributes:</span> <span class="p">[</span><span class="ss">:id</span><span class="p">,</span> <span class="ss">:name</span><span class="p">,</span> <span class="ss">:job</span><span class="p">]])</span>
<span class="p">{</span><span class="ss">:atomic</span><span class="p">,</span> <span class="ss">:ok</span><span class="p">}</span>
</code></pre></div></div>

<p>Chúng ta định nghĩa các cột thông qua atoms <code class="highlighter-rouge">:id</code>, <code class="highlighter-rouge">:name</code> và <code class="highlighter-rouge">:job</code>. Khi chúng ta thực thi <code class="highlighter-rouge">Mnesia.create_table/2</code>, nó sẽ trả về một trong 2 loại sau đây:</p>

<ul>
  <li><code class="highlighter-rouge">{:atomic, :ok}</code> Nếu thực thi thành công</li>
  <li><code class="highlighter-rouge">{:aborted, Reason}</code> Nếu thực thi thất bại</li>
</ul>

<p>Thực tế, nếu bảng tồn tại, lý do sẽ nằm ở mẫu <code class="highlighter-rouge">{:already_exists, table}</code> vậy nên chúng ta thử tạo bảng lần thứ 2, chúng ta sẽ nhận được kết quả sau:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">iex</span><span class="o">&gt;</span> <span class="no">Mnesia</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="no">Person</span><span class="p">,</span> <span class="p">[</span><span class="ss">attributes:</span> <span class="p">[</span><span class="ss">:id</span><span class="p">,</span> <span class="ss">:name</span><span class="p">,</span> <span class="ss">:job</span><span class="p">]])</span>
<span class="p">{</span><span class="ss">:aborted</span><span class="p">,</span> <span class="p">{</span><span class="ss">:already_exists</span><span class="p">,</span> <span class="no">Person</span><span class="p">}}</span>
</code></pre></div></div>

<h2 id="phương-pháp-ngoài-luồng">Phương pháp ngoài luồng</h2>

<p>Trước hết chúng ta sẽ nhìn phương pháp ngoài luồng cho việc đọc và ghi và bảng của Mnesia. Điều này thường nên tránh vì thành công sẽ không được bảo đảm, nhưng nó sẽ giúp chúng ta học và trở nên quen thuộc khi làm việc với Mnesia. Cùng thêm vào một vào đối tượng cho bảng <strong>Person</strong> của chúng ta:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">iex</span><span class="o">&gt;</span> <span class="no">Mnesia</span><span class="o">.</span><span class="n">dirty_write</span><span class="p">({</span><span class="no">Person</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">"Seymour Skinner"</span><span class="p">,</span> <span class="s2">"Principal"</span><span class="p">})</span>
<span class="ss">:ok</span>

<span class="n">iex</span><span class="o">&gt;</span> <span class="no">Mnesia</span><span class="o">.</span><span class="n">dirty_write</span><span class="p">({</span><span class="no">Person</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">"Homer Simpson"</span><span class="p">,</span> <span class="s2">"Safety Inspector"</span><span class="p">})</span>
<span class="ss">:ok</span>

<span class="n">iex</span><span class="o">&gt;</span> <span class="no">Mnesia</span><span class="o">.</span><span class="n">dirty_write</span><span class="p">({</span><span class="no">Person</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">"Moe Szyslak"</span><span class="p">,</span> <span class="s2">"Bartender"</span><span class="p">})</span>
<span class="ss">:ok</span>
</code></pre></div></div>

<p>…và lấy thông tin thông qua <code class="highlighter-rouge">Mnesia.dirty_read/1</code>:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">iex</span><span class="o">&gt;</span> <span class="no">Mnesia</span><span class="o">.</span><span class="n">dirty_read</span><span class="p">({</span><span class="no">Person</span><span class="p">,</span> <span class="mi">1</span><span class="p">})</span>
<span class="p">[{</span><span class="no">Person</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">"Seymour Skinner"</span><span class="p">,</span> <span class="s2">"Principal"</span><span class="p">}]</span>

<span class="n">iex</span><span class="o">&gt;</span> <span class="no">Mnesia</span><span class="o">.</span><span class="n">dirty_read</span><span class="p">({</span><span class="no">Person</span><span class="p">,</span> <span class="mi">2</span><span class="p">})</span>
<span class="p">[{</span><span class="no">Person</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">"Homer Simpson"</span><span class="p">,</span> <span class="s2">"Safety Inspector"</span><span class="p">}]</span>

<span class="n">iex</span><span class="o">&gt;</span> <span class="no">Mnesia</span><span class="o">.</span><span class="n">dirty_read</span><span class="p">({</span><span class="no">Person</span><span class="p">,</span> <span class="mi">3</span><span class="p">})</span>
<span class="p">[{</span><span class="no">Person</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">"Moe Szyslak"</span><span class="p">,</span> <span class="s2">"Bartender"</span><span class="p">}]</span>

<span class="n">iex</span><span class="o">&gt;</span> <span class="no">Mnesia</span><span class="o">.</span><span class="n">dirty_read</span><span class="p">({</span><span class="no">Person</span><span class="p">,</span> <span class="mi">4</span><span class="p">})</span>
<span class="p">[]</span>
</code></pre></div></div>

<p>Nếu bạn muốn truy vấn thông tin không tồn tại Mnesia sẽ trả về danh sách rỗng.</p>

<h2 id="transactions">Transactions</h2>

<p>Thông thường chúng ta sử dụng <strong>transactions</strong> để đóng gói lại những truy vấn đọc và ghi tới database. Transactions là một phần quan trọng trong việc thiết kế chống chịu lỗi, đặc biệt trong hệ thống phân tán. Mnesia <em>transaction là một phương pháp mà cho phép một nhóm cách thao tác database có thể thực thi trong một function block</em>. Đầu tiên chúng ta tạo một function nặc danh, trong trường hợp này <code class="highlighter-rouge">data_to_write</code> và sau đó truyền nó vào <code class="highlighter-rouge">Mnesia.transaction</code>.</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">iex</span><span class="o">&gt;</span> <span class="n">data_to_write</span> <span class="o">=</span> <span class="k">fn</span> <span class="o">-&gt;</span>
<span class="o">...&gt;</span>   <span class="no">Mnesia</span><span class="o">.</span><span class="n">write</span><span class="p">({</span><span class="no">Person</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s2">"Marge Simpson"</span><span class="p">,</span> <span class="s2">"home maker"</span><span class="p">})</span>
<span class="o">...&gt;</span>   <span class="no">Mnesia</span><span class="o">.</span><span class="n">write</span><span class="p">({</span><span class="no">Person</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s2">"Hans Moleman"</span><span class="p">,</span> <span class="s2">"unknown"</span><span class="p">})</span>
<span class="o">...&gt;</span>   <span class="no">Mnesia</span><span class="o">.</span><span class="n">write</span><span class="p">({</span><span class="no">Person</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="s2">"Monty Burns"</span><span class="p">,</span> <span class="s2">"Businessman"</span><span class="p">})</span>
<span class="o">...&gt;</span>   <span class="no">Mnesia</span><span class="o">.</span><span class="n">write</span><span class="p">({</span><span class="no">Person</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="s2">"Waylon Smithers"</span><span class="p">,</span> <span class="s2">"Executive assistant"</span><span class="p">})</span>
<span class="o">...&gt;</span> <span class="k">end</span>
<span class="c1">#Function&lt;20.54118792/0 in :erl_eval.expr/5&gt;</span>

<span class="n">iex</span><span class="o">&gt;</span> <span class="no">Mnesia</span><span class="o">.</span><span class="n">transaction</span><span class="p">(</span><span class="n">data_to_write</span><span class="p">)</span>
<span class="p">{</span><span class="ss">:atomic</span><span class="p">,</span> <span class="ss">:ok</span><span class="p">}</span>
</code></pre></div></div>
<p>Dựa trên kết quả của transaction, chúng ta có thể yên tâm giả định là chúng ta ghi dữ liệu xuống bảng <code class="highlighter-rouge">Person</code>. Hãy sử dụng transaction để đọc từ database để đảm bảo việc này. Chúng ta sẽ sử dụng <code class="highlighter-rouge">Mnesia.read/1</code> để đọc từ database, nhưng là từ một function nặc danh một lần nữa.</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">iex</span><span class="o">&gt;</span> <span class="n">data_to_read</span> <span class="o">=</span> <span class="k">fn</span> <span class="o">-&gt;</span>
<span class="o">...&gt;</span>   <span class="no">Mnesia</span><span class="o">.</span><span class="n">read</span><span class="p">({</span><span class="no">Person</span><span class="p">,</span> <span class="mi">6</span><span class="p">})</span>
<span class="o">...&gt;</span> <span class="k">end</span>
<span class="c1">#Function&lt;20.54118792/0 in :erl_eval.expr/5&gt;</span>

<span class="n">iex</span><span class="o">&gt;</span> <span class="no">Mnesia</span><span class="o">.</span><span class="n">transaction</span><span class="p">(</span><span class="n">data_to_read</span><span class="p">)</span>
<span class="p">{</span><span class="ss">:atomic</span><span class="p">,</span> <span class="p">[{</span><span class="no">Person</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="s2">"Monty Burns"</span><span class="p">,</span> <span class="s2">"Businessman"</span><span class="p">}]}</span>
</code></pre></div></div>

<p>Lưu ý rằng nếu bạn muốn cập nhật dữ liệu, bạn chỉ cần gọi <code class="highlighter-rouge">Mnesia.write/1</code> với khoá trùng với dữ liệu cần cập nhật. Vậy nên, để cập nhật dữ liệu cho Hans, bạn có thể làm như sau:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">iex</span><span class="o">&gt;</span> <span class="no">Mnesia</span><span class="o">.</span><span class="n">transaction</span><span class="p">(</span>
<span class="o">...&gt;</span>   <span class="k">fn</span> <span class="o">-&gt;</span>
<span class="o">...&gt;</span>     <span class="no">Mnesia</span><span class="o">.</span><span class="n">write</span><span class="p">({</span><span class="no">Person</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s2">"Hans Moleman"</span><span class="p">,</span> <span class="s2">"Ex-Mayor"</span><span class="p">})</span>
<span class="o">...&gt;</span>   <span class="k">end</span>
<span class="o">...&gt;</span> <span class="p">)</span>
</code></pre></div></div>

<h2 id="sử-dụng-chỉ-mục">Sử dụng chỉ mục</h2>

<p>Mnesia hỗ trợ chỉ mục cho những cột không phải là khoá và dữ liệu sau đó có thể truy vấn thông qua những chỉ mục trên. Vì vậy, chúng ta có thể thêm chỉ mục ở cột <code class="highlighter-rouge">:job</code> của bảng <code class="highlighter-rouge">Person</code>:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">iex</span><span class="o">&gt;</span> <span class="no">Mnesia</span><span class="o">.</span><span class="n">add_table_index</span><span class="p">(</span><span class="no">Person</span><span class="p">,</span> <span class="ss">:job</span><span class="p">)</span>
<span class="p">{</span><span class="ss">:atomic</span><span class="p">,</span> <span class="ss">:ok</span><span class="p">}</span>
</code></pre></div></div>

<p>Kết quả tương tự với kết quả từ câu lệnh <code class="highlighter-rouge">Mnesia.create_table/2</code>:</p>

<ul>
  <li><code class="highlighter-rouge">{:atomic, :ok}</code> nếu thực thi thành công</li>
  <li><code class="highlighter-rouge">{:aborted, Reason}</code> nếu thực thi thật bại</li>
</ul>

<p>Thực tế, nếu chỉ mục đã tồn tại, lý do sẽ nằm ở mẫu <code class="highlighter-rouge">{:already_exists, table, attribute_index}</code> vậy nếu chúng thử thêm vào chỉ một một lần nữa, chúng ta sẽ nhận được kết quả sau:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">iex</span><span class="o">&gt;</span> <span class="no">Mnesia</span><span class="o">.</span><span class="n">add_table_index</span><span class="p">(</span><span class="no">Person</span><span class="p">,</span> <span class="ss">:job</span><span class="p">)</span>
<span class="p">{</span><span class="ss">:aborted</span><span class="p">,</span> <span class="p">{</span><span class="ss">:already_exists</span><span class="p">,</span> <span class="no">Person</span><span class="p">,</span> <span class="mi">4</span><span class="p">}}</span>
</code></pre></div></div>

<p>Một khi chỉ mục thành công, bạn có thể đọc từ đó và lấy danh sách các đối tượng:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">iex</span><span class="o">&gt;</span> <span class="no">Mnesia</span><span class="o">.</span><span class="n">transaction</span><span class="p">(</span>
<span class="o">...&gt;</span>   <span class="k">fn</span> <span class="o">-&gt;</span>
<span class="o">...&gt;</span>     <span class="no">Mnesia</span><span class="o">.</span><span class="n">index_read</span><span class="p">(</span><span class="no">Person</span><span class="p">,</span> <span class="s2">"Principal"</span><span class="p">,</span> <span class="ss">:job</span><span class="p">)</span>
<span class="o">...&gt;</span>   <span class="k">end</span>
<span class="o">...&gt;</span> <span class="p">)</span>
<span class="p">{</span><span class="ss">:atomic</span><span class="p">,</span> <span class="p">[{</span><span class="no">Person</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">"Seymour Skinner"</span><span class="p">,</span> <span class="s2">"Principal"</span><span class="p">}]}</span>
</code></pre></div></div>

<h2 id="so-khớp-và-lựa-chọn">So khớp và lựa chọn</h2>

<p>Mnesia hỗ trợ câu truy vấn phức tạp để lấy dữ liệu từ bảng trong kiểu so khớp và ad-hoc trọng việc lựa chọn functions:</p>

<p><code class="highlighter-rouge">Mnesia.match_object/1</code> trả về tất cả các dữ liệu mà khớp với mẫu được đưa ra. Nếu bất kì cột nào trong bảng có chỉ mục, nó có thể tận dụng chúng để truy vấn hiệu quả hơn. Sử dụng một atom đặc biệt <code class="highlighter-rouge">:_</code> để nhận diện những cột nào không có trong so khớp:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">iex</span><span class="o">&gt;</span> <span class="no">Mnesia</span><span class="o">.</span><span class="n">transaction</span><span class="p">(</span>
<span class="o">...&gt;</span>   <span class="k">fn</span> <span class="o">-&gt;</span>
<span class="o">...&gt;</span>     <span class="no">Mnesia</span><span class="o">.</span><span class="n">match_object</span><span class="p">({</span><span class="no">Person</span><span class="p">,</span> <span class="ss">:_</span><span class="p">,</span> <span class="s2">"Marge Simpson"</span><span class="p">,</span> <span class="ss">:_</span><span class="p">})</span>
<span class="o">...&gt;</span>   <span class="k">end</span>
<span class="o">...&gt;</span> <span class="p">)</span>
<span class="p">{</span><span class="ss">:atomic</span><span class="p">,</span> <span class="p">[{</span><span class="no">Person</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s2">"Marge Simpson"</span><span class="p">,</span> <span class="s2">"home maker"</span><span class="p">}]}</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">Mnesia.select/2</code> cho phép bạn dùng một câu truy vấn có tuỳ chỉnh cái mà sử dụng bất kì thao tác hoặc function trong Elixir (hoặc Erlang). Cùng xem ví dụ sau để lấy tất cả các dữ liệu có khoá lớn hơn 3:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">iex</span><span class="o">&gt;</span> <span class="no">Mnesia</span><span class="o">.</span><span class="n">transaction</span><span class="p">(</span>
<span class="o">...&gt;</span>   <span class="k">fn</span> <span class="o">-&gt;</span>
<span class="o">...&gt;</span>     <span class="no">Mnesia</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="no">Person</span><span class="p">,</span> <span class="p">[{{</span><span class="no">Person</span><span class="p">,</span> <span class="ss">:"$1"</span><span class="p">,</span> <span class="ss">:"$2"</span><span class="p">,</span> <span class="ss">:"$3"</span><span class="p">},</span> <span class="p">[{</span><span class="ss">:&gt;</span><span class="p">,</span> <span class="ss">:"$1"</span><span class="p">,</span> <span class="mi">3</span><span class="p">}],</span> <span class="p">[</span><span class="ss">:"$$"</span><span class="p">]}])</span>
<span class="o">...&gt;</span>   <span class="k">end</span>
<span class="o">...&gt;</span> <span class="p">)</span>
<span class="p">{</span><span class="ss">:atomic</span><span class="p">,</span> <span class="p">[[</span><span class="mi">7</span><span class="p">,</span> <span class="s2">"Waylon Smithers"</span><span class="p">,</span> <span class="s2">"Executive assistant"</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="s2">"Marge Simpson"</span><span class="p">,</span> <span class="s2">"home maker"</span><span class="p">],</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="s2">"Monty Burns"</span><span class="p">,</span> <span class="s2">"Businessman"</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="s2">"Hans Moleman"</span><span class="p">,</span> <span class="s2">"unknown"</span><span class="p">]]}</span>
</code></pre></div></div>

<p>Cùng khám phá nó. Thuộc tính đầu tiên là bảng, <code class="highlighter-rouge">Person</code>, thuộc tính thứ 2 là mẫu với 3 tham số <code class="highlighter-rouge">{match, [guard], [result]}</code>:</p>

<ul>
  <li><code class="highlighter-rouge">match</code> giống với những gì bạn truyền cho <code class="highlighter-rouge">Mnesia.match_object/1</code>; tuy nhiên, lưu ý atom đặc biệt <code class="highlighter-rouge">:"$n"</code> cái dùng để xác định vị trí tham số được sử đụng cho phần còn lại của câu truy vấn.</li>
  <li>danh sách <code class="highlighter-rouge">guard</code> là một danh sách các tuples dùng để xác định những guard function nào được áp dụng, trong trường hợp này là <code class="highlighter-rouge">:&gt;</code> ( lớn hơn) được tạo sẵn trong function với tham số đầu tiên <code class="highlighter-rouge">:"$1"</code> và hằng số 3 như là giá trị.</li>
  <li>danh sách <code class="highlighter-rouge">result</code> là danh sách các trường mà được trả về bởi câu truy vấn, vị trí các tham số của atom đặc biệt <code class="highlighter-rouge">:"$$"</code> dùng để tham chiếu tới tất cả các trường mà bạn có thể dùng <code class="highlighter-rouge">[:"$1", :"$2"]</code> để trả về 2 trường đầu tiên hoặc <code class="highlighter-rouge">[:"$$"]</code> cho tất cả các trường.</li>
</ul>

<p>Chi tiết hơn, tham khảo <a href="http://erlang.org/doc/man/mnesia.html#select-2">the Erlang Mnesia documentation for select/2</a>.</p>

<h2 id="khởi-tạo-dữ-liệu-và-chuyển-đổi">Khởi tạo dữ liệu và chuyển đổi</h2>

<p>Với bất kì giải pháp phần mềm nào, sẽ đến lúc bạn cần nâng cấp phần mềm và chuyển đổi dữ liệu lưu trữ trong database của bạn. Ví dụ, chúng ta muốn thêm cột <code class="highlighter-rouge">:age</code> vào bảng <code class="highlighter-rouge">Person</code> trong v2 của ứng dụng ta. Chúng ta không thể tạo bảng <code class="highlighter-rouge">Person</code> một lần nữa vì nó đã được tạo nhưng chúng ta có thể chuyển đổi chúng. Để làm vậy chúng ta cần biết khi nào cần chuyển, những gì cúng ta có thể làm khi tạo bảng. Để làm điều này, chúng ta có thể sử dụng <code class="highlighter-rouge">Mnesia.table_info/2</code> để lấy thông tin hiện tại về cấu trúc của bảng và <code class="highlighter-rouge">Mnesia.transform_table/3</code> để chuyển nó sang cấu trúc mới.</p>

<p>Cài đặt sau thực hiện chúng thông qua thực thi các cách sau:</p>

<ul>
  <li>Tạo bảng thuộc tính v2: <code class="highlighter-rouge">[:id, :name, :job, :age]</code></li>
  <li>Xử lý kết quả tạo bảng trả về:
    <ul>
      <li><code class="highlighter-rouge">{:atomic, :ok}</code>: khởi tạo bảng bằng cách tạo chỉ mục trên <code class="highlighter-rouge">:job</code> và <code class="highlighter-rouge">:age</code></li>
      <li><code class="highlighter-rouge">{:aborted, {:already_exists, Person}}</code>: kiểm tra những thuộc tính hiện tại trong bảng và thao tác như sau:
        <ul>
          <li>nếu nó nằm trong danh sách v1 (<code class="highlighter-rouge">[:id, :name, :job]</code>), chuyển đổi bảng gán mọi người với tuổi 21 và tạo chỉ mục trên <code class="highlighter-rouge">:age</code></li>
          <li>nếu nó nằm trên dánh sách v2, không làm gì cả, mọi thứ tốt</li>
          <li>nếu khác nữa, kệ nó</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><code class="highlighter-rouge">Mnesia.transform_table/3</code> function lấy bảng và các tham số, function mà chuyển đổi dữ liệu từ cũ sang kiểu mới và danh sách các thuộc tính mới.</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">iex</span><span class="o">&gt;</span> <span class="k">case</span> <span class="no">Mnesia</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="no">Person</span><span class="p">,</span> <span class="p">[</span><span class="ss">attributes:</span> <span class="p">[</span><span class="ss">:id</span><span class="p">,</span> <span class="ss">:name</span><span class="p">,</span> <span class="ss">:job</span><span class="p">,</span> <span class="ss">:age</span><span class="p">]])</span> <span class="k">do</span>
<span class="o">...&gt;</span>   <span class="p">{</span><span class="ss">:atomic</span><span class="p">,</span> <span class="ss">:ok</span><span class="p">}</span> <span class="o">-&gt;</span>
<span class="o">...&gt;</span>     <span class="no">Mnesia</span><span class="o">.</span><span class="n">add_table_index</span><span class="p">(</span><span class="no">Person</span><span class="p">,</span> <span class="ss">:job</span><span class="p">)</span>
<span class="o">...&gt;</span>     <span class="no">Mnesia</span><span class="o">.</span><span class="n">add_table_index</span><span class="p">(</span><span class="no">Person</span><span class="p">,</span> <span class="ss">:age</span><span class="p">)</span>
<span class="o">...&gt;</span>   <span class="p">{</span><span class="ss">:aborted</span><span class="p">,</span> <span class="p">{</span><span class="ss">:already_exists</span><span class="p">,</span> <span class="no">Person</span><span class="p">}}</span> <span class="o">-&gt;</span>
<span class="o">...&gt;</span>     <span class="k">case</span> <span class="no">Mnesia</span><span class="o">.</span><span class="n">table_info</span><span class="p">(</span><span class="no">Person</span><span class="p">,</span> <span class="ss">:attributes</span><span class="p">)</span> <span class="k">do</span>
<span class="o">...&gt;</span>       <span class="p">[</span><span class="ss">:id</span><span class="p">,</span> <span class="ss">:name</span><span class="p">,</span> <span class="ss">:job</span><span class="p">]</span> <span class="o">-&gt;</span>
<span class="o">...&gt;</span>         <span class="no">Mnesia</span><span class="o">.</span><span class="n">transform_table</span><span class="p">(</span>
<span class="o">...&gt;</span>           <span class="no">Person</span><span class="p">,</span>
<span class="o">...&gt;</span>           <span class="k">fn</span> <span class="p">({</span><span class="no">Person</span><span class="p">,</span> <span class="n">id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">job</span><span class="p">})</span> <span class="o">-&gt;</span>
<span class="o">...&gt;</span>             <span class="p">{</span><span class="no">Person</span><span class="p">,</span> <span class="n">id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">job</span><span class="p">,</span> <span class="mi">21</span><span class="p">}</span>
<span class="o">...&gt;</span>           <span class="k">end</span><span class="p">,</span>
<span class="o">...&gt;</span>           <span class="p">[</span><span class="ss">:id</span><span class="p">,</span> <span class="ss">:name</span><span class="p">,</span> <span class="ss">:job</span><span class="p">,</span> <span class="ss">:age</span><span class="p">]</span>
<span class="o">...&gt;</span>           <span class="p">)</span>
<span class="o">...&gt;</span>         <span class="no">Mnesia</span><span class="o">.</span><span class="n">add_table_index</span><span class="p">(</span><span class="no">Person</span><span class="p">,</span> <span class="ss">:age</span><span class="p">)</span>
<span class="o">...&gt;</span>       <span class="p">[</span><span class="ss">:id</span><span class="p">,</span> <span class="ss">:name</span><span class="p">,</span> <span class="ss">:job</span><span class="p">,</span> <span class="ss">:age</span><span class="p">]</span> <span class="o">-&gt;</span>
<span class="o">...&gt;</span>         <span class="ss">:ok</span>
<span class="o">...&gt;</span>       <span class="n">other</span> <span class="o">-&gt;</span>
<span class="o">...&gt;</span>         <span class="p">{</span><span class="ss">:error</span><span class="p">,</span> <span class="n">other</span><span class="p">}</span>
<span class="o">...&gt;</span>     <span class="k">end</span>
<span class="o">...&gt;</span> <span class="k">end</span>
</code></pre></div></div>

    
    <blockquote class="edit-lesson">    
      Caught a mistake or want to contribute to the lesson?
      <a href="https://github.com/elixirschool/elixirschool/edit/master/vi/lessons/specifics/mnesia.md" target="_blank" rel="noopener">
        Edit this page on GitHub!
      </a>
    </blockquote>
  </div>
</section>



<section>

<div class="row">
    
    
    
    <div class="6u 12u$(small)">
        <a class="button special fit" href="/vi/lessons/specifics/ets/" title="Erlang Term Storage (ETS)">← Erlang Term Storage (ETS)</a>
    </div>
    
    
    
    <div class="6u 12u$(small)">
        <a class="button special fit" href="/vi/lessons/libraries/guardian/" title="Guardian (Cơ bản)">Guardian (Cơ bản) →</a>
    </div>
    
</div>
</section>




				</div>
			</div>
			<!-- Sidebar -->
  <div id="sidebar">
    <p class="toggle-theme-wrapper"><a rel="noopener" href="#toggle-theme" class="toggle-theme icon fas fa-circle-o" alt="Toggle Theme" title="Toggle Theme"></a></p>

    <div class="inner">
      
<!-- Locales Section -->
<section id="search" class="alt">
  <div id="locales">

      
        
        

        
          <a href="/en/lessons/specifics/mnesia/" title="English">en</a>
        
      
        
        

        
          <a href="/es/lessons/specifics/mnesia/" title="Español">es</a>
        
      
        
        

        
          <a href="/gr/lessons/specifics/mnesia/" >gr</a>
        
      
        
        

        
          <a href="/id/lessons/specifics/mnesia/" title="Bahasa Indonesia">id</a>
        
      
        
        

        
          <a href="/ko/lessons/specifics/mnesia/" >ko</a>
        
      
        
        

        
          <a href="/pl/lessons/specifics/mnesia/" >pl</a>
        
      
        
        

        
          <a href="/pt/lessons/specifics/mnesia/" >pt</a>
        
      
        
        

        
          <a href="/ru/lessons/specifics/mnesia/" title="Русский">ru</a>
        
      
        
        

        
          <a href="/th/lessons/specifics/mnesia/" title="ภาษาไทย">th</a>
        
      
        
        

        
          <strong >vi</strong>
        
      
        
        

        
          <a href="/zh-hans/lessons/specifics/mnesia/" >zh-hans</a>
        
      
        
        

        
          <a href="/zh-hant/lessons/specifics/mnesia/" >zh-hant</a>
        
      

  </div>
</section>


      
<!-- Menu -->
<nav id="menu">
  <span class="stack-info otp-version">Elixir 1.10.1 - Erlang/OTP 22.0 [erts-10.5.3]</span>
  <header class="major">
    <h2>Menu</h2>
    <p>Giáo trình cho ngôn ngữ lập trình Elixir</p>
  </header>
  <ul>
    <li>
      <a href="/vi/" class=" up ">Home</a>
    </li>
  
    
    
    
    
    
  
    
    
    
    
    
      
        
        <li>
          <span class="opener up">Cơ bản</span>
          <ul>
        
            <li>
              
              <a href="/vi/lessons/basics/basics/">1. Cơ bản</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/basics/collections/">2. Các tập dữ liệu</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/basics/enum/">3. Enum</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/basics/pattern-matching/">4. Pattern matching (so trùng mẫu)</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/basics/control-structures/">5. Cấu trúc điều khiển</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/basics/functions/">6. Hàm</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/basics/pipe-operator/">7. Pipe Operator</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/basics/modules/">8. Modules</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/basics/mix/">9. Mix</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/basics/sigils/">10. Sigils</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/basics/documentation/">11. Documentation</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/basics/testing/">12. Testing</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/basics/comprehensions/">13. Comprehensions</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/basics/strings/">14. Strings</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/basics/mix-tasks/">16. Tác vụ Mix tùy biến</a>
              
            </li>
        
          </ul>
        </li>
        
      
    
  
    
    
    
    
    
      
        
        <li>
          <span class="opener up">Nâng cao</span>
          <ul>
        
            <li>
              
              <a href="/vi/lessons/advanced/erlang/">1. Erlang Interoperability</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/advanced/error-handling/">2. Xử Lý Lỗi</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/advanced/escripts/">3. File thực thi</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/advanced/concurrency/">4. Xử lý đồng thời</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/advanced/otp-concurrency/">5. OTP Concurrency</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/advanced/otp-supervisors/">6. OTP Supervisors</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/advanced/metaprogramming/">8. Metaprogramming</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/advanced/umbrella-projects/">9. Các dự án ô</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/advanced/typespec/">10. Đặc tả và kiểu</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/advanced/behaviours/">11. Behaviours</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/advanced/gen-stage/">12. GenStage</a>
              
            </li>
        
          </ul>
        </li>
        
      
    
  
    
    
    
    
    
      
        
        <li>
          <span class="opener up">Ecto</span>
          <ul>
        
            <li>
              
              <a href="/vi/lessons/ecto/basics/">1. Basics</a>
              
            </li>
        
          </ul>
        </li>
        
      
    
  
    
    
    
    
    
      
        
        <li>
          <span class="opener active up">Cụ thể</span>
          <ul>
        
            <li>
              
              <a href="/vi/lessons/specifics/plug/">1. Plug</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/specifics/eex/">2. Embedded Elixir (EEx)</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/specifics/ets/">3. Erlang Term Storage (ETS)</a>
              
            </li>
        
      
        
            <li>
              
              <span class="active">4. Mnesia</span>
              
            </li>
        
          </ul>
        </li>
        
      
    
  
    
    
    
    
    
      
        
        <li>
          <span class="opener up">Thư viện</span>
          <ul>
        
            <li>
              
              <a href="/vi/lessons/libraries/guardian/">1. Guardian (Cơ bản)</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/libraries/poolboy/">2. Poolboy</a>
              
            </li>
        
          </ul>
        </li>
        
      
    
  
    <li>
      <a href="/blog/" class=" up ">Blog</a>
    </li>
    
    <li>
      <a href="/vi/report/" class=" up ">Translation Report</a>
    </li>
    
    <li>
      <a href="/contributors/" class=" up ">Contributors</a>
    </li>
  </ul>
</nav>

      <!-- Footer -->
      <footer id="footer">
        <p class="copyright">&copy; 2021 <a target="_blank" rel="noopener" href="https://github.com/doomspork">Sean Callan</a> All rights reserved.</p>
      </footer>
    </div>
  </div>

		</div>
		<!-- Scripts -->

    <script async="" src="/assets/main-f8c201d2721dcb6d1d4f6acb0ebd2b2c192757ed29271f519513e4417e347611.js" type="text/javascript"></script>
		<!--[if lte IE 8]><script async="" src="/assets/ie/respond.min-8306093ccce666c01dab405fac0d16596a1d1cf38aa0ba919d4831261662cdbb.js" type="text/javascript"></script><script src="assets/js/ie/respond.min.js"></script><![endif]-->
	</body>
</html>
