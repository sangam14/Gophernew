<!DOCTYPE HTML>



<html lang="vi">
	<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta name="description" content="Giáo trình cho ngôn ngữ lập trình Elixir">
  <meta name="author" content="Sean Callan">

  <meta property="og:url" content="http://localhost:4000/vi/lessons/basics/modules/">
  <meta property="og:site_name" content="ElixirSchool">
  <meta property="og:title" content="Elixir School">
  <meta property="og:locale" content="vi">
  <meta property="og:description" content="Giáo trình cho ngôn ngữ lập trình Elixir">
  <meta property="og:image" content="http://localhost:4000/assets/og_image-fad975b316dea5dc361d199bdfaa076006da49a0a3296f799aa7217b4c8b0cbe.jpg">
  
  
    
    
    
    
      <link rel="alternate" hreflang="bn" href="/bn/lessons/basics/modules/" />
    
  
    
    
    
    
      <link rel="alternate" hreflang="de" href="/de/lessons/basics/modules/" />
    
  
    
    
    
    
      <link rel="alternate" hreflang="en" href="/en/lessons/basics/modules/" />
      <link rel="alternate" hreflang="x-default" href="/en/lessons/basics/modules/" />
    
  
    
    
    
    
      <link rel="alternate" hreflang="es" href="/es/lessons/basics/modules/" />
    
  
    
    
    
    
      <link rel="alternate" hreflang="fr" href="/fr/lessons/basics/modules/" />
    
  
    
    
    
    
      <link rel="alternate" hreflang="el" href="/gr/lessons/basics/modules/" />
    
  
    
    
    
    
      <link rel="alternate" hreflang="id" href="/id/lessons/basics/modules/" />
    
  
    
    
    
    
      <link rel="alternate" hreflang="it" href="/it/lessons/basics/modules/" />
    
  
    
    
    
    
      <link rel="alternate" hreflang="ja" href="/ja/lessons/basics/modules/" />
    
  
    
    
    
    
      <link rel="alternate" hreflang="ko" href="/ko/lessons/basics/modules/" />
    
  
    
    
    
    
      <link rel="alternate" hreflang="ms" href="/ms/lessons/basics/modules/" />
    
  
    
    
    
    
      <link rel="alternate" hreflang="no" href="/no/lessons/basics/modules/" />
    
  
    
    
    
    
      <link rel="alternate" hreflang="pl" href="/pl/lessons/basics/modules/" />
    
  
    
    
    
    
      <link rel="alternate" hreflang="pt" href="/pt/lessons/basics/modules/" />
    
  
    
    
    
    
      <link rel="alternate" hreflang="ru" href="/ru/lessons/basics/modules/" />
    
  
    
    
    
    
      <link rel="alternate" hreflang="sk" href="/sk/lessons/basics/modules/" />
    
  
    
    
    
    
      <link rel="alternate" hreflang="tr" href="/tr/lessons/basics/modules/" />
    
  
    
    
    
    
      <link rel="alternate" hreflang="uk" href="/uk/lessons/basics/modules/" />
    
  
    
    
    
    
      <link rel="alternate" hreflang="vi" href="/vi/lessons/basics/modules/" />
    
  
    
    
    
    
      <link rel="alternate" hreflang="zh-hans" href="/zh-hans/lessons/basics/modules/" />
    
  
    
    
    
    
      <link rel="alternate" hreflang="zh-hant" href="/zh-hant/lessons/basics/modules/" />
    
  

  <link rel="canonical" href="http://localhost:4000/vi/lessons/basics/modules/">
  <link rel="apple-touch-icon" sizes="180x180" href="http://localhost:4000/assets/favicons/apple-touch-icon-06ad80501b5734bba0428ca0fc14fcbe45811a144914f7be78cdab3c3ea25458.png">
  <link rel="icon" type="image/png" sizes="32x32" href="http://localhost:4000/assets/favicons/favicon-32x32-6e7b9eca57d29d185a5184e844c1372ce9da0a71f373f89b80ff11f120b01678.png">
  <link rel="icon" type="image/png" sizes="16x16" href="http://localhost:4000/assets/favicons/favicon-16x16-789b56195138252cac40cf7f2425b6fcb4e71c3084abc8525781188781b958d3.png">
  <link rel="manifest" href="http://localhost:4000/manifest.json">
  <link rel="shortcut icon" href="http://localhost:4000/assets/favicons/favicon-8e1fdc2a44d6344b9871b3ecf53a803903891f82a602a3f59c65eda40f2b77b0.ico">
  <link rel="alternate" type="application/rss+xml" title="Elixir School" href="https://elixirschool.com/feed.xml" />
  <meta name="msapplication-config" content="http://localhost:4000/assets/favicons/browserconfig-e66282a6754e6899f9a53c6ebfe120749630242b741deb65f364abc297ccbc96.xml">
  <meta name="theme-color" content="#ffffff">

  
  
  <title>Modules &middot; Elixir School</title>
  <!-- CSS -->
  <!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
  <link rel="stylesheet" type="text/css" href="/assets/main-07a5a32c1a26652d2bb0e43b4c7ade37f20599a76cae3c1e871d3af53cff80b2.css">
  <!--[if lte IE 9]><link rel="stylesheet" type="text/css" href="/assets/ie9-0c07c3ea146a3dd5dce4effda97b3718824cab9c30149877c0e445edecfdee60.css"><![endif]-->
  <!--[if lte IE 8]><link rel="stylesheet" type="text/css" href="/assets/ie8-f0c85ce6ad95a6d33929cb969a44f41a5e96ecb22de55f55d0f3c83cfc0012fc.css"><![endif]-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
  <script type="text/javascript">
  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.1.0";
  analytics.load("C0p07Sw9j7mZnycKDCgPOAyqJR5hhyoQ");
  analytics.page()
  }}();
  </script>
  <script type="text/javascript">
    if ("serviceWorker" in navigator) {
      if (!navigator.serviceWorker.controller) {
        navigator.serviceWorker.register("http://localhost:4000/serviceworker.js", {
          scope: "http://localhost:4000"
        })
        .then(reg => console.log("Service worker has been registered for scope: ", reg.scope))
        .catch(error => console.log("Service worker registration has failed: ", error));
      }
    }  
  </script>
</head>

	<body class="is-loading">
    <script type="text/javascript">
    var $theme = localStorage.getItem('theme');
    if ($theme === 'dark') document.body.classList.add("dark");
    </script>
		<!-- Wrapper -->
		<div id="wrapper">
			<!-- Main -->
			<div id="main">
				<div class="inner">
					<!-- Header -->
					<header id="header">
					  <a href="/vi/" class="logo"><strong>Elixir School</strong></a>
					  <ul class="icons">
  
  <li><iframe src="https://ghbtns.com/github-btn.html?user=elixirschool&repo=elixirschool&type=star&count=true" height="20" title="GitHub Stars" width="93" style="vertical-align: sub;"></iframe></li>
  <li><a target="_blank" rel="noopener" title="RSS" href="https://elixirschool.com/feed.xml" class="icon fa-rss-square"><span class="label">RSS</span></a></li>
  <li><a target="_blank" rel="noopener" title="LinkedIn" href="https://www.linkedin.com/shareArticle?mini=true&url=http://localhost:4000/vi/lessons/basics/modules/&title=Modules&summary=description&source=http://localhost:4000" class="icon fa-linkedin"><span class="label">Linkedin</span></a></li>
  <li><a target="_blank" rel="noopener" title="Twitter" href="https://twitter.com/intent/tweet?url=http://localhost:4000/vi/lessons/basics/modules/&via=elixirschool&text=ElixirSchool: Modules&hashtags=learnelixir%2Celixirlang&" class="icon fa-twitter"><span class="label">Twitter</span></a></li>
  <li><a target="_blank" rel="noopener" title="Facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/vi/lessons/basics/modules/" class="icon fa-facebook"><span class="label">Facebook</span></a></li>
  <li><a target="_blank" rel="noopener" title="Pinterest" href="https://www.pinterest.com/pin/create/link/?url=http://localhost:4000/vi/lessons/basics/modules/&media=http://localhost:4000/assets/og_image-fad975b316dea5dc361d199bdfaa076006da49a0a3296f799aa7217b4c8b0cbe.jpg&description=ElixirSchool: Modules" class="icon fa-pinterest"><span class="label">Pinterest</span></a></li>
  <li><a target="_blank" rel="noopener" title="VK" href="https://vk.com/share.php?url=http://localhost:4000/vi/lessons/basics/modules/&title=ElixirSchool: Modules&description=Check out 'Modules' on ElixirSchool" class="icon fa-vk"><span class="label">VK</span></a></li>
  <li><a target="_blank" rel="noopener" title="Email" href="mailto:?to=&subject=ElixirSchool: Modules&body=Check out 'Modules' on ElixirSchool%0D%0A%0D%0Ahttp://localhost:4000/vi/lessons/basics/modules/" class="icon fa-envelope"><span class="label">Email</span></a></li>
  <li><a title="Print" href="javascript:window.print()" class="icon fa-print"><span class="label">Print</span></a></li>
</ul>

					</header>
					<section id="section-page" class="ltr">
  <header class="main">
    
    <h1 class="page-title">
  <span class="version-difference-indicator version-difference-major"></span>
  Modules
</h1>
<div class="version-info version-info-major">
  <span>
    
      Some contents of this translation may be outdated.<br/>
    

    Several major changes were applied to the original lesson since the last update.
  </span>
</div>

    
  </header>
  <div class="content">
    <p>Chúng ta biết từ kinh nghiệm là để tất cả các hàm vào trong một file khá là không tốt. Trong bài học này, chúng ta sẽ học cách nhóm các hàm lại với nhau, và định nghĩa một loại map đặc biệt là <code class="highlighter-rouge">struct</code> để tổ chức code một cách hiệu quả hơn.</p>

<h2>Mục lục</h2>
<div id="toc"></div>

<h2 id="modules">Modules</h2>

<p>Module là cách tốt nhất để tổ chức các hàm vào một namespace. Ngoài việc nhóm các hàm với nhau, nó còn cho phép chúng ta định nghĩa các “named function” public và private như chúng ta đã học ở bài học trước.</p>

<p>Hãy cùng xem một ví dụ cơ bản:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">defmodule</span> <span class="no">Example</span> <span class="k">do</span>
  <span class="k">def</span> <span class="n">greeting</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="k">do</span>
    <span class="s2">"Hello </span><span class="si">#{</span><span class="n">name</span><span class="si">}</span><span class="s2">."</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">iex</span><span class="o">&gt;</span> <span class="no">Example</span><span class="o">.</span><span class="n">greeting</span> <span class="s2">"Sean"</span>
<span class="s2">"Hello Sean."</span>
</code></pre></div></div>

<p>Trong Elixir, chúng ta có thể tạo các module lòng này, điều này cho phép bạn có thể dễ dàng phân chia các tính năng hơn.</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">defmodule</span> <span class="no">Example</span><span class="o">.</span><span class="no">Greetings</span> <span class="k">do</span>
  <span class="k">def</span> <span class="n">morning</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="k">do</span>
    <span class="s2">"Good morning </span><span class="si">#{</span><span class="n">name</span><span class="si">}</span><span class="s2">."</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="n">evening</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="k">do</span>
    <span class="s2">"Good night </span><span class="si">#{</span><span class="n">name</span><span class="si">}</span><span class="s2">."</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">iex</span><span class="o">&gt;</span> <span class="no">Example</span><span class="o">.</span><span class="no">Greetings</span><span class="o">.</span><span class="n">morning</span> <span class="s2">"Sean"</span>
<span class="s2">"Good morning Sean."</span>
</code></pre></div></div>

<h3 id="thuộc-tính-của-module">Thuộc tính của module</h3>

<p>Thuộc tính của module phần lớn được dùng như hằng số trong Elixir. Hãy cùng xem một ví dụ đơn giản:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">defmodule</span> <span class="no">Example</span> <span class="k">do</span>
  <span class="nv">@greeting</span> <span class="s2">"Hello"</span>

  <span class="k">def</span> <span class="n">greeting</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="k">do</span>
    <span class="sx">~s(#{@greeting} #{name}.)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Cần đặc biệt chú ý rằng: có một vài thuộc tính đặc biệt trong Elixir. Ba thuộc tính phổ thông nhất là:</p>

<ul>
  <li><code class="highlighter-rouge">moduledoc</code> — Định nghĩa tài liệu cho module hiện tại</li>
  <li><code class="highlighter-rouge">doc</code> — Định nghĩa tài liệu cho hàm và macro.</li>
  <li><code class="highlighter-rouge">behaviour</code> — Sử dụng trong OTP hoặc định nghĩa các behaviour</li>
</ul>

<h2 id="structs">Structs</h2>

<p>Struct là các map đặc biệt được định nghĩa như một tập các khoá và các giá trị mặc định. Một struct phải được định nghĩa trong một module, từ đó tên của struct sẽ là tên của module. Rất là bình thường nếu như struct là thứ duy nhất mà module định nghĩa trong nó.</p>

<p>Để định nghĩa một struct, chúng ta sử dụng macro <code class="highlighter-rouge">defstruct</code> cùng với một keyword list của các trường và các giá trị mặc định:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">defmodule</span> <span class="no">Example</span><span class="o">.</span><span class="no">User</span> <span class="k">do</span>
  <span class="k">defstruct</span> <span class="ss">name:</span> <span class="s2">"Sean"</span><span class="p">,</span> <span class="ss">roles:</span> <span class="p">[]</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Hãy cùng tạo một vài structs:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">iex</span><span class="o">&gt;</span> <span class="p">%</span><span class="no">Example</span><span class="o">.</span><span class="no">User</span><span class="p">{}</span>
<span class="p">%</span><span class="no">Example</span><span class="o">.</span><span class="no">User</span><span class="o">&lt;</span><span class="ss">name:</span> <span class="s2">"Sean"</span><span class="p">,</span> <span class="ss">roles:</span> <span class="p">[],</span> <span class="o">...&gt;</span>

<span class="n">iex</span><span class="o">&gt;</span> <span class="p">%</span><span class="no">Example</span><span class="o">.</span><span class="no">User</span><span class="p">{</span><span class="ss">name:</span> <span class="s2">"Steve"</span><span class="p">}</span>
<span class="p">%</span><span class="no">Example</span><span class="o">.</span><span class="no">User</span><span class="o">&lt;</span><span class="ss">name:</span> <span class="s2">"Steve"</span><span class="p">,</span> <span class="ss">roles:</span> <span class="p">[],</span> <span class="o">...&gt;</span>

<span class="n">iex</span><span class="o">&gt;</span> <span class="p">%</span><span class="no">Example</span><span class="o">.</span><span class="no">User</span><span class="p">{</span><span class="ss">name:</span> <span class="s2">"Steve"</span><span class="p">,</span> <span class="ss">roles:</span> <span class="p">[</span><span class="ss">:manager</span><span class="p">]}</span>
<span class="p">%</span><span class="no">Example</span><span class="o">.</span><span class="no">User</span><span class="o">&lt;</span><span class="ss">name:</span> <span class="s2">"Steve"</span><span class="p">,</span> <span class="ss">roles:</span> <span class="p">[</span><span class="ss">:manager</span><span class="p">]</span><span class="o">&gt;</span>
</code></pre></div></div>

<p>Chúng ta cũng có thể cập nhật struct giống như chúng ta làm với một map:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">iex</span><span class="o">&gt;</span> <span class="n">steve</span> <span class="o">=</span> <span class="p">%</span><span class="no">Example</span><span class="o">.</span><span class="no">User</span><span class="p">{</span><span class="ss">name:</span> <span class="s2">"Steve"</span><span class="p">}</span>
<span class="p">%</span><span class="no">Example</span><span class="o">.</span><span class="no">User</span><span class="o">&lt;</span><span class="ss">name:</span> <span class="s2">"Steve"</span><span class="p">,</span> <span class="ss">roles:</span> <span class="p">[</span><span class="o">...</span><span class="p">],</span> <span class="o">...&gt;</span>
<span class="n">iex</span><span class="o">&gt;</span> <span class="n">sean</span> <span class="o">=</span> <span class="p">%{</span><span class="n">steve</span> <span class="o">|</span> <span class="ss">name:</span> <span class="s2">"Sean"</span><span class="p">}</span>
<span class="p">%</span><span class="no">Example</span><span class="o">.</span><span class="no">User</span><span class="o">&lt;</span><span class="ss">name:</span> <span class="s2">"Sean"</span><span class="p">,</span> <span class="ss">roles:</span> <span class="p">[</span><span class="o">...</span><span class="p">],</span> <span class="o">...&gt;</span>
</code></pre></div></div>

<p>Quan trọng nhất, chúng ta có thể so trùng mẫu struct với map:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">iex</span><span class="o">&gt;</span> <span class="p">%{</span><span class="ss">name:</span> <span class="s2">"Sean"</span><span class="p">}</span> <span class="o">=</span> <span class="n">sean</span>
<span class="p">%</span><span class="no">Example</span><span class="o">.</span><span class="no">User</span><span class="o">&lt;</span><span class="ss">name:</span> <span class="s2">"Sean"</span><span class="p">,</span> <span class="ss">roles:</span> <span class="p">[</span><span class="o">...</span><span class="p">],</span> <span class="o">...&gt;</span>
</code></pre></div></div>

<h2 id="composition">Composition</h2>

<p>Giờ chúng ta đã biết cách để tạo các module và struct. Hãy cùng học cách để thêm cách tính năng đã tồn tại vào trong chúng thông qua composition. Elixir cung cấp cho chúng ta một vài cách để tương tác giữa các module với nhau.</p>

<h3 id="alias"><code class="highlighter-rouge">alias</code></h3>

<p>Cho phép chúng ta có thể “alias” tên của một module, “alias” được sử dụng khá thường xuyên trong Elixir:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">defmodule</span> <span class="no">Sayings</span><span class="o">.</span><span class="no">Greetings</span> <span class="k">do</span>
  <span class="k">def</span> <span class="n">basic</span><span class="p">(</span><span class="n">name</span><span class="p">),</span> <span class="k">do</span><span class="p">:</span> <span class="s2">"Hi, </span><span class="si">#{</span><span class="n">name</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>

<span class="k">defmodule</span> <span class="no">Example</span> <span class="k">do</span>
  <span class="n">alias</span> <span class="no">Sayings</span><span class="o">.</span><span class="no">Greetings</span>

  <span class="k">def</span> <span class="n">greeting</span><span class="p">(</span><span class="n">name</span><span class="p">),</span> <span class="k">do</span><span class="p">:</span> <span class="no">Greetings</span><span class="o">.</span><span class="n">basic</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
<span class="k">end</span>

<span class="c1"># Without alias</span>

<span class="k">defmodule</span> <span class="no">Example</span> <span class="k">do</span>
  <span class="k">def</span> <span class="n">greeting</span><span class="p">(</span><span class="n">name</span><span class="p">),</span> <span class="k">do</span><span class="p">:</span> <span class="no">Sayings</span><span class="o">.</span><span class="no">Greetings</span><span class="o">.</span><span class="n">basic</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Nếu như có xung đột giữa 2 alias, hoặc chúng ta muốn alias với một tên hoàn toàn khác, chúng ta có thể sử dụng lựa chọn <code class="highlighter-rouge">:as</code>:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">defmodule</span> <span class="no">Example</span> <span class="k">do</span>
  <span class="n">alias</span> <span class="no">Sayings</span><span class="o">.</span><span class="no">Greetings</span><span class="p">,</span> <span class="ss">as:</span> <span class="no">Hi</span>

  <span class="k">def</span> <span class="n">print_message</span><span class="p">(</span><span class="n">name</span><span class="p">),</span> <span class="k">do</span><span class="p">:</span> <span class="no">Hi</span><span class="o">.</span><span class="n">basic</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Chúng ta thậm chí có thể alias nhiều module cùng một lúc:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">defmodule</span> <span class="no">Example</span> <span class="k">do</span>
  <span class="n">alias</span> <span class="no">Sayings</span><span class="o">.</span><span class="p">{</span><span class="no">Greetings</span><span class="p">,</span> <span class="no">Farewells</span><span class="p">}</span>
<span class="k">end</span>
</code></pre></div></div>

<h3 id="import"><code class="highlighter-rouge">import</code></h3>

<p>Nếu chúng ta muốn import nhiều hàm và macros thay vì alias module, chúng ta có thể dùng <code class="highlighter-rouge">import/</code></p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">iex</span><span class="o">&gt;</span> <span class="n">last</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="o">**</span> <span class="p">(</span><span class="no">CompileError</span><span class="p">)</span> <span class="ss">iex:</span><span class="mi">9</span><span class="p">:</span> <span class="n">undefined</span> <span class="n">function</span> <span class="n">last</span><span class="o">/</span><span class="mi">1</span>
<span class="n">iex</span><span class="o">&gt;</span> <span class="kn">import</span> <span class="no">List</span>
<span class="no">nil</span>
<span class="n">iex</span><span class="o">&gt;</span> <span class="n">last</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="mi">3</span>
</code></pre></div></div>

<h4 id="filtering">Filtering</h4>

<p>Mặc định tất cả các hàm và macro sẽ được import vào, nhưng chúng ta có thể lọc chúng ra bằng cách sử dung lựa chọn <code class="highlighter-rouge">:only</code> và <code class="highlighter-rouge">:except</code>.</p>

<p>Để import các hàm và macro cụ thể, chúng ta sẽ phải cung cấp một cặp tên/số tham số (arity) cho <code class="highlighter-rouge">:only</code> và <code class="highlighter-rouge">:except</code>. Hãy cùng import chỉ nguyên hàm <code class="highlighter-rouge">last/1</code>:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">iex</span><span class="o">&gt;</span> <span class="kn">import</span> <span class="no">List</span><span class="p">,</span> <span class="ss">only:</span> <span class="p">[</span><span class="ss">last:</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">iex</span><span class="o">&gt;</span> <span class="n">first</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="o">**</span> <span class="p">(</span><span class="no">CompileError</span><span class="p">)</span> <span class="ss">iex:</span><span class="mi">13</span><span class="p">:</span> <span class="n">undefined</span> <span class="n">function</span> <span class="n">first</span><span class="o">/</span><span class="mi">1</span>
<span class="n">iex</span><span class="o">&gt;</span> <span class="n">last</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="mi">3</span>
</code></pre></div></div>

<p>Nếu chúng ta import tất cả mọi thứ trừ <code class="highlighter-rouge">last/1</code>, chúng ta có thể làm như sau:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">iex</span><span class="o">&gt;</span> <span class="kn">import</span> <span class="no">List</span><span class="p">,</span> <span class="ss">except:</span> <span class="p">[</span><span class="ss">last:</span> <span class="mi">1</span><span class="p">]</span>
<span class="no">nil</span>
<span class="n">iex</span><span class="o">&gt;</span> <span class="n">first</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="mi">1</span>
<span class="n">iex</span><span class="o">&gt;</span> <span class="n">last</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="o">**</span> <span class="p">(</span><span class="no">CompileError</span><span class="p">)</span> <span class="ss">iex:</span><span class="mi">3</span><span class="p">:</span> <span class="n">undefined</span> <span class="n">function</span> <span class="n">last</span><span class="o">/</span><span class="mi">1</span>
</code></pre></div></div>

<p>Bên cạnh các cặp tên/arity, có 2 atom đặc biệt, <code class="highlighter-rouge">:functions</code> và <code class="highlighter-rouge">:macros</code> được dùng để chỉ import các hàm hoặc các macro tương ứng:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="no">List</span><span class="p">,</span> <span class="ss">only:</span> <span class="ss">:functions</span>
<span class="kn">import</span> <span class="no">List</span><span class="p">,</span> <span class="ss">only:</span> <span class="ss">:macros</span>
</code></pre></div></div>

<h3 id="require"><code class="highlighter-rouge">require</code></h3>

<p>Mặc dùng ít khi sử dụng, <code class="highlighter-rouge">require/2</code> dù sao cũng khá quan trong để yêu cầu một module đảm bảo rằng nó được biên dịch vào nạp vào. Điều này đặc biệt hữu dụng nếu chúng ta muốn truy cập vào các macro của một module:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">defmodule</span> <span class="no">Example</span> <span class="k">do</span>
  <span class="kn">require</span> <span class="no">SuperMacros</span>

  <span class="no">SuperMacros</span><span class="o">.</span><span class="n">do_stuff</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Nếu chúng ta có gắng gọi một macro chưa được nạp trong Elixir, một lỗi sẽ bị văng ra.</p>

<h3 id="use"><code class="highlighter-rouge">use</code></h3>

<p><code class="highlighter-rouge">use</code> macro sẽ gọi tới một macro đặc biệt, được gọi là <code class="highlighter-rouge">__using__/1</code> từ module được chỉ định. Đây là một ví dụ:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># lib/use_import_require/use_me.ex</span>
<span class="k">defmodule</span> <span class="no">UseImportRequire</span><span class="o">.</span><span class="no">UseMe</span> <span class="k">do</span>
  <span class="k">defmacro</span> <span class="n">__using__</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="k">do</span>
    <span class="kn">quote</span> <span class="k">do</span>
      <span class="k">def</span> <span class="n">use_test</span> <span class="k">do</span>
        <span class="no">IO</span><span class="o">.</span><span class="n">puts</span><span class="p">(</span><span class="s2">"use_test"</span><span class="p">)</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>và chúng ta có thể thêm dòng này vào trong <code class="highlighter-rouge">UseImportRequire</code></p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">use</span> <span class="no">UseImportRequire</span><span class="o">.</span><span class="no">UseMe</span>
</code></pre></div></div>

<p>sử dụng module UseImportRequire.UseMe để định nghĩa một hàm <code class="highlighter-rouge">use_test/0</code> thông qua việc gọi tới macro <code class="highlighter-rouge">__using__/1</code>.</p>

<p>Đó là tất cả những gì mà <code class="highlighter-rouge">use</code> làm. Ngoài ra, <code class="highlighter-rouge">__using__</code> được sử dụng khá là phổ biến để gọi tới các <code class="highlighter-rouge">alias</code>, <code class="highlighter-rouge">require</code> và <code class="highlighter-rouge">import</code>. Những macro này sẽ tạo các alias, hoặc là import trong module đươc sử dụng. Điều này cho phép module có thể được sử dụng để định nghĩa một chính sách để các hàm các các macros có thể tham chiếu lẫn nhau. Nó khá là linh động khi <code class="highlighter-rouge">__using__/1</code> có thể được sử dụng để cấu hình việc tham chiếu tới các module khác, đặc biệt là các module con (submodule).</p>

<p>Phoenix framework sử dụng <code class="highlighter-rouge">__using__/1</code> để giảm bớt việc phải lặp lại các alias và import call trong các module do lập trình viên định nghĩa.</p>

<p>Sau đây là một ví dụ rất ngắn gọi từ trong module <code class="highlighter-rouge">Ecto.Migration</code>:</p>

<div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">defmacro</span> <span class="n">__using__</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="k">do</span>
  <span class="kn">quote</span> <span class="ss">location:</span> <span class="ss">:keep</span> <span class="k">do</span>
    <span class="kn">import</span> <span class="no">Ecto</span><span class="o">.</span><span class="no">Migration</span>
    <span class="nv">@disable_ddl_transaction</span> <span class="no">false</span>
    <span class="nv">@before_compile</span> <span class="no">Ecto</span><span class="o">.</span><span class="no">Migration</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Macro <code class="highlighter-rouge">Ecto.Migration.__using__/1</code> bao gồm một lời gọi import, do vậy khi bạn gọi <code class="highlighter-rouge">use Ecto.Migration</code>, bạn cũng gọi tới <code class="highlighter-rouge">import Ecto.Migration</code>. Nó cũng cấu hình một thuộc tính của module từ đó chúng ta sẽ điều khiển hoạt động của Ecto.</p>

<p>Nói tóm lại: <code class="highlighter-rouge">use</code> macro đơn giản gọi tới <code class="highlighter-rouge">__using__/1</code> macro của module cụ thể. Để thực sử hiều nó làm những gì, bạn cần đọc vào module <code class="highlighter-rouge">__using__/1</code></p>

<p><strong>Note</strong>: <code class="highlighter-rouge">quote</code>, <code class="highlighter-rouge">alias</code>, <code class="highlighter-rouge">use</code>, <code class="highlighter-rouge">require</code> là các macro được sử dụng khi chúng ta làm việc với <a href="../../advanced/metaprogramming">metaprogramming</a>.</p>

    
    <blockquote class="edit-lesson">    
      Caught a mistake or want to contribute to the lesson?
      <a href="https://github.com/elixirschool/elixirschool/edit/master/vi/lessons/basics/modules.md" target="_blank" rel="noopener">
        Edit this page on GitHub!
      </a>
    </blockquote>
  </div>
</section>



<section>

<div class="row">
    
    
    
    <div class="6u 12u$(small)">
        <a class="button special fit" href="/vi/lessons/basics/pipe-operator/" title="Pipe Operator">← Pipe Operator</a>
    </div>
    
    
    
    <div class="6u 12u$(small)">
        <a class="button special fit" href="/vi/lessons/basics/mix/" title="Mix">Mix →</a>
    </div>
    
</div>
</section>




				</div>
			</div>
			<!-- Sidebar -->
  <div id="sidebar">
    <p class="toggle-theme-wrapper"><a rel="noopener" href="#toggle-theme" class="toggle-theme icon fas fa-circle-o" alt="Toggle Theme" title="Toggle Theme"></a></p>

    <div class="inner">
      
<!-- Locales Section -->
<section id="search" class="alt">
  <div id="locales">

      
        
        

        
          <a href="/bn/lessons/basics/modules/" >bn</a>
        
      
        
        

        
          <a href="/de/lessons/basics/modules/" >de</a>
        
      
        
        

        
          <a href="/en/lessons/basics/modules/" title="English">en</a>
        
      
        
        

        
          <a href="/es/lessons/basics/modules/" title="Español">es</a>
        
      
        
        

        
          <a href="/fr/lessons/basics/modules/" title="Francais">fr</a>
        
      
        
        

        
          <a href="/gr/lessons/basics/modules/" >gr</a>
        
      
        
        

        
          <a href="/id/lessons/basics/modules/" title="Bahasa Indonesia">id</a>
        
      
        
        

        
          <a href="/it/lessons/basics/modules/" >it</a>
        
      
        
        

        
          <a href="/ja/lessons/basics/modules/" title="日本語">ja</a>
        
      
        
        

        
          <a href="/ko/lessons/basics/modules/" >ko</a>
        
      
        
        

        
          <a href="/ms/lessons/basics/modules/" >ms</a>
        
      
        
        

        
          <a href="/no/lessons/basics/modules/" >no</a>
        
      
        
        

        
          <a href="/pl/lessons/basics/modules/" >pl</a>
        
      
        
        

        
          <a href="/pt/lessons/basics/modules/" >pt</a>
        
      
        
        

        
          <a href="/ru/lessons/basics/modules/" title="Русский">ru</a>
        
      
        
        

        
          <a href="/sk/lessons/basics/modules/" >sk</a>
        
      
        
        

        
          <a href="/tr/lessons/basics/modules/" >tr</a>
        
      
        
        

        
          <a href="/uk/lessons/basics/modules/" >uk</a>
        
      
        
        

        
          <strong >vi</strong>
        
      
        
        

        
          <a href="/zh-hans/lessons/basics/modules/" >zh-hans</a>
        
      
        
        

        
          <a href="/zh-hant/lessons/basics/modules/" >zh-hant</a>
        
      

  </div>
</section>


      
<!-- Menu -->
<nav id="menu">
  <span class="stack-info otp-version">Elixir 1.10.1 - Erlang/OTP 22.0 [erts-10.5.3]</span>
  <header class="major">
    <h2>Menu</h2>
    <p>Giáo trình cho ngôn ngữ lập trình Elixir</p>
  </header>
  <ul>
    <li>
      <a href="/vi/" class=" up ">Home</a>
    </li>
  
    
    
    
    
    
  
    
    
    
    
    
      
        
        <li>
          <span class="opener active up">Cơ bản</span>
          <ul>
        
            <li>
              
              <a href="/vi/lessons/basics/basics/">1. Cơ bản</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/basics/collections/">2. Các tập dữ liệu</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/basics/enum/">3. Enum</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/basics/pattern-matching/">4. Pattern matching (so trùng mẫu)</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/basics/control-structures/">5. Cấu trúc điều khiển</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/basics/functions/">6. Hàm</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/basics/pipe-operator/">7. Pipe Operator</a>
              
            </li>
        
      
        
            <li>
              
              <span class="active">8. Modules</span>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/basics/mix/">9. Mix</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/basics/sigils/">10. Sigils</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/basics/documentation/">11. Documentation</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/basics/testing/">12. Testing</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/basics/comprehensions/">13. Comprehensions</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/basics/strings/">14. Strings</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/basics/mix-tasks/">16. Tác vụ Mix tùy biến</a>
              
            </li>
        
          </ul>
        </li>
        
      
    
  
    
    
    
    
    
      
        
        <li>
          <span class="opener up">Nâng cao</span>
          <ul>
        
            <li>
              
              <a href="/vi/lessons/advanced/erlang/">1. Erlang Interoperability</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/advanced/error-handling/">2. Xử Lý Lỗi</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/advanced/escripts/">3. File thực thi</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/advanced/concurrency/">4. Xử lý đồng thời</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/advanced/otp-concurrency/">5. OTP Concurrency</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/advanced/otp-supervisors/">6. OTP Supervisors</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/advanced/metaprogramming/">8. Metaprogramming</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/advanced/umbrella-projects/">9. Các dự án ô</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/advanced/typespec/">10. Đặc tả và kiểu</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/advanced/behaviours/">11. Behaviours</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/advanced/gen-stage/">12. GenStage</a>
              
            </li>
        
          </ul>
        </li>
        
      
    
  
    
    
    
    
    
      
        
        <li>
          <span class="opener up">Ecto</span>
          <ul>
        
            <li>
              
              <a href="/vi/lessons/ecto/basics/">1. Basics</a>
              
            </li>
        
          </ul>
        </li>
        
      
    
  
    
    
    
    
    
      
        
        <li>
          <span class="opener up">Cụ thể</span>
          <ul>
        
            <li>
              
              <a href="/vi/lessons/specifics/plug/">1. Plug</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/specifics/eex/">2. Embedded Elixir (EEx)</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/specifics/ets/">3. Erlang Term Storage (ETS)</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/specifics/mnesia/">4. Mnesia</a>
              
            </li>
        
          </ul>
        </li>
        
      
    
  
    
    
    
    
    
      
        
        <li>
          <span class="opener up">Thư viện</span>
          <ul>
        
            <li>
              
              <a href="/vi/lessons/libraries/guardian/">1. Guardian (Cơ bản)</a>
              
            </li>
        
      
        
            <li>
              
              <a href="/vi/lessons/libraries/poolboy/">2. Poolboy</a>
              
            </li>
        
          </ul>
        </li>
        
      
    
  
    <li>
      <a href="/blog/" class=" up ">Blog</a>
    </li>
    
    <li>
      <a href="/vi/report/" class=" up ">Translation Report</a>
    </li>
    
    <li>
      <a href="/contributors/" class=" up ">Contributors</a>
    </li>
  </ul>
</nav>

      <!-- Footer -->
      <footer id="footer">
        <p class="copyright">&copy; 2021 <a target="_blank" rel="noopener" href="https://github.com/doomspork">Sean Callan</a> All rights reserved.</p>
      </footer>
    </div>
  </div>

		</div>
		<!-- Scripts -->

    <script async="" src="/assets/main-f8c201d2721dcb6d1d4f6acb0ebd2b2c192757ed29271f519513e4417e347611.js" type="text/javascript"></script>
		<!--[if lte IE 8]><script async="" src="/assets/ie/respond.min-8306093ccce666c01dab405fac0d16596a1d1cf38aa0ba919d4831261662cdbb.js" type="text/javascript"></script><script src="assets/js/ie/respond.min.js"></script><![endif]-->
	</body>
</html>
